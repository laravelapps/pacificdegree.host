!function(e){"use strict";var t,r;(e.picreel=e.picreel||{}).config=((t={main:"//app.picreel.com/",s3:"//system.picreel.com/"}).sourceUrl=t.main+"api/get_template",t.dataUrl=t.main+"api/send_data",t.sendAnswer="https:"+t.main+"api/get_survey_result",t.libs={jquery:"//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js",json3:"http://cdnjs.cloudflare.com/ajax/libs/json3/3.3.2/json3.min.js"},t.styles={survey:t.main+"css/picreel.poll.css",surveyPopup:t.s3+"css/picreel.poll-popup.min.css",helloBar:t.main+"css/picreel.hellobar.css",nanoBar:t.s3+"css/picreel.nanobar.min.css",reminderBar:t.s3+"css/picreel.reminderbar.min.css",tab:t.main+"css/picreel.tab.min.css"},t.messenger=t.s3+"js/cd.min.js",r=t,{getUrls:function(){return r},isLocal:function(){return!0},isDebug:function(){return!1}})}(window),function(d,s){"use strict";var p=d.picreel=d.picreel||{};p.utils=function(){var t,o=p.config.getUrls(),n=[],i=[];function a(e,r,o){var i,a;e&&((i=document.createElement("script")).type="text/javascript",i.src=e,i.async=!1,n.push(0),i.onreadystatechange=i.onload=function(e){var t=i.readyState;this.readyState&&!/loaded|complete/.test(t)||("function"!=typeof r||a||(r(),a=!0),o&&(document.body||head).removeChild(i)),n.pop()},(document.body||document.head).appendChild(i))}return{loadStyles:function(e,t){var r;if(-1!==i.indexOf(e))return-1;(r=document.createElement("link")).setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(r),r.onreadystatechange=r.onload=function(){"function"==typeof t&&t()},i.push(e)},loadScript:a,jsonp:function(e,t,r){var o,i,a,n,s,p,l,c,u=t;l="jsoncallback",c=u,o=(p=e)+(0<p.indexOf("?")?"&":"?")+l+"="+c,i=function(t){d[u]=function(e){d[u]=null,t(),r(e)}},a=document,n=a.head,(s=a.createElement("script")).setAttribute("src",o),n.appendChild(s),i(function(){setTimeout(function(){n.removeChild(s)},0)})},setText:function(e,t){e["innerText"in e?"innerText":"textContent"]=t},sendDataWithScript:function(e,t,r){a(t+"?data="+e,r||!1,!0)},cookies:{getItem:function(e){return e&&decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t,r,o,i,a){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var n="";if(r)switch(r.constructor){case Number:n=r===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+r;break;case String:n="; expires="+r;break;case Date:n="; expires="+r.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+n+(i?"; domain="+i:"")+(o?"; path="+o:"")+(a?"; secure":""),!0},removeItem:function(e,t,r){return!!this.hasItem(e)&&(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(r?"; domain="+r:"")+(t?"; path="+t:""),!0)},hasItem:function(e){return!!e&&new RegExp("(?:^|;\\s*)"+decodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=e.length,r=0;r<t;r++)e[r]=decodeURIComponent(e[r]);return e},getAllCookies:function(){for(var e=document.cookie.split(";"),t="{",r=1;r<=e.length;r++){var o=e[r-1].split("=");t+='"'+o[0].replace(" ","")+'":"'+(void 0!==o[1]?o[1]:"")+'"',r!=e.length&&(t+=",")}return t+="}"},getCookieByNamePart:function(e){if(!e)return null;var t=document.cookie.match(new RegExp("[^;s=]*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"*?[^=]*=s*([^;]*)"));return null!==t?decodeURIComponent(t[1]):null}},checkSupport:function(e,t){var r;if(e){switch(e){case"jquery":!function(){function e(){a(o.libs.jquery,function(){})}var t;void 0===d.jQuery?e():(t=d.jQuery.fn.jquery&&d.jQuery.fn.jquery.split("."))&&(1==t[0]&&7<=t[1]||1<t[0])||e()}();break;case"json":"undefined"==typeof JSON&&a(o.libs.json3);break;default:return}r=setInterval(function(){0===n.length&&(clearInterval(r),t&&t())},10)}},isIe:function(){var e;return void 0!==t||(t=-1,"Microsoft Internet Explorer"==navigator.appName?(e=navigator.userAgent,null!==new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(e=navigator.userAgent,null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1)))),t},createEvent:function(t){try{var e=new Event(t);e.initEvent(t,!0,!0),document.dispatchEvent(e)}catch(e){var r=document.createEvent("Event");r.initEvent(t,!0,!1),document.dispatchEvent(r)}},addEvent:function(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent&&e.attachEvent("on"+t,r)},removeEvent:function(e,t,r){e.removeEventListener?e.removeEventListener(t,r,!1):e.detachEvent&&e.detachEvent("on"+t,r)},getScrollPercentage:function(){return t=d.innerHeight||(document.documentElement||document.body).clientHeight,e=document,r=Math.max(e.body.scrollHeight,e.documentElement.scrollHeight,e.body.offsetHeight,e.documentElement.offsetHeight,e.body.clientHeight,e.documentElement.clientHeight),o=d.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop,i=r-t,Math.round(o/i*100);var e,t,r,o,i},getLocationPath:function(){var e=picreel.utils.isIe(),t=location.pathname;if(new RegExp("\\..{2,4}$","ig").exec(t)&&e&&-1!=e){var r=location.pathname.split("/");2<=r.length&&(r[r.length-1]=""),t=r.join("/")}return t},getParameterByName:function(e,t){t||(t=d.location.href);var r=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return r&&r[1]||s},removeSpecificStyleProperty:function(e,t){var r,o=new RegExp("(; |^){1}("+e+"[^;]+; ?)"),i=t.attr("style");i&&(r=i.match(o)),r&&r[2]&&t.attr("style",i.replace(r[2],""))},removePicreelElements:function(){for(var e=document.getElementsByClassName("picreel-element"),t=e.length-1;0<=t;t--)e[t]&&e[t].parentElement&&e[t].parentElement.removeChild(e[t])},getSupportedCssProp:function(e){for(var t=document.documentElement,r=0;r<e.length;r++)if(e[r]in t.style)return e[r]},documentHeight:function(){return Math.max(document.documentElement.clientHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)},addCssTransform:function(e,t){var r=p.utils.getSupportedCssProp(["transform","MozTransform","WebkitTransform","msTransform","OTransform"]);void 0!==r&&(e.style[r]=t)},isEmail:function(e){return!(-1==e.search(/[_a-z0-9-]+(\.[_a-z0-9-]+)*(\+[a-z0-9-]+)?@[a-z0-9-]+\.[a-z0-9-]+(\.[_a-z0-9-]+)*/i))},isPhone:function(e){return!(-1==e.search(/^\+?\d{5,13}$/i))},getDomainFromUrl:function(e){var t=e=(e=(e=(e=(e=(e=e.replace(new RegExp(/^\s+/),"")).replace(new RegExp(/\s+$/),"")).replace(new RegExp(/\\/g),"/")).replace(new RegExp(/^http\:\/\/|^https\:\/\/|^ftp\:\/\//i),"")).replace(new RegExp(/^www\./i),"")).replace(new RegExp(/\/(.*)/),"");if(e.match(new RegExp(/\.[a-z]{2,3}\.[a-z]{2}$/i))?e=e.replace(new RegExp(/\.[a-z]{2,3}\.[a-z]{2}$/i),""):e.match(new RegExp(/\.[a-z]{2,4}$/i))&&(e=e.replace(new RegExp(/\.[a-z]{2,4}$/i),"")),e.match(new RegExp(/\./g))){var r=t.split(".");r.shift(),t=r.join(".")}return t}}}()}(window),function(l){"use strict";var c=l.picreel=l.picreel||{};c.tracker=function(){var i=c.utils.cookies,e=(c.config.isDebug(),!1),t=86400,r=18e5,a=!1,n=!1,o={sourceUrl:encodeURIComponent(location.href),sourceHost:encodeURIComponent(l.location.origin?l.location.origin:l.location.protocol+"//"+l.location.hostname+(l.location.port?":"+l.location.port:"")),cookieEnabled:navigator.cookieEnabled,doNotTrack:navigator.doNotTrack,language:navigator.language,userAgent:encodeURIComponent(navigator.userAgent),screenWidth:l.innerWidth,screenHeight:l.innerHeight,passedTemplates:p(),campaignId:0,referrer:document.referrer,currentTemplate:0,isReturning:s()};function s(){var e=!1;return o&&void 0!==o.isReturning?o.isReturning:(i.getItem("picreel_tracker__first_visit")&&new Date-new Date(i.getItem("picreel_tracker__first_visit"))>=r&&(e=!0),e)}function p(){var e,t=[],r=document.cookie.match(new RegExp("template\\d+Id=[^;]*","ig")),o=document.cookie.match(new RegExp("picreel_popup__template_passed_\\d+[^;]*","ig"));for(o&&o.length?e=r&&r.length?Math.max(r.length,o.length):o.length:r&&r.length&&(e=r.length);e--;)r&&void 0!==r[e]&&t.push(r[e].split("=")[1]),o&&void 0!==o[e]&&t.push(o[e].split("=")[1]);return t.length?t.join(","):""}return{getGetParameters:function(){for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++)if(-1<e[t].src.indexOf("/jstracker.content.min.js")||-1<e[t].src.indexOf("/jstracker.content.api.min.js")){for(var r=e[t].src.split("?").pop().split("&"),o={},i=0;i<r.length;i++){var a=r[i].split("=");o[a[0]]=a[1]}return o}return{}},getGEOData:function(t){var r="United States",o=new XMLHttpRequest;o.open("GET","//pro.ip-api.com/json?key=AxkQodIWMY4GbB8&fields=country,countryCode,query",!0),o.timeout=610,o.onload=function(){if("invalid key"===o.responseText.trim())a=r;else{var e=JSON.parse(o.responseText);a=void 0!==e.country&&""!==e.country?e.country:r,void 0!==e.query&&""!==e.query&&(n=e.query)}t()},o.ontimeout=function(e){a=r,t()},o.onerror=function(e){a=r,t()},o.send()},getGEOCountryCode:function(){return a},getGEOclientIP:function(){return n},getPrlGetParametersUrl:function(){for(var e=location.href.split("?").pop().split("&"),t="",r=0;r<e.length;r++){var o=e[r].split("=");new RegExp("^prl_(.)*").exec(o[0])&&(t+="&"+o[0]+"="+o[1])}return t},setPrlGetParametersCookie:function(e){i.setItem("prl_get_params",e,1/0,"/")},getPrlGetParametersCookie:function(){return i.getItem("prl_get_params")},getUserData:function(){return o},getNewUserData:function(){var e;e={sourceUrl:encodeURIComponent(location.href),sourceHost:encodeURIComponent(l.location.origin?l.location.origin:l.location.protocol+"//"+l.location.hostname+(l.location.port?":"+l.location.port:"")),cookieEnabled:navigator.cookieEnabled,doNotTrack:navigator.doNotTrack,language:navigator.language,userAgent:encodeURIComponent(navigator.userAgent),screenWidth:l.innerWidth,screenHeight:l.innerHeight,passedTemplates:p(),campaignId:0,referrer:document.referrer,currentTemplate:0,isReturning:s()},o=e},getPageView:function(){return i.getItem("picreel_tracker__page_views")},isReturning:s,isPicreelBlocked:function(){return null!==i.getItem("picreel_block")},isJustVisited:function(){return e},isVisitedCookie:function(){return null===i.getItem("picreel_tracker__visited")},setVisited:function(){null===i.getItem("picreel_tracker__visited")&&(e=!0,i.setItem("picreel_tracker__visited",1,t,"/"))},blockPicreel:function(e){i.setItem("picreel_block",1,t*e,c.utils.getLocationPath())},addPageView:function(){var e=null===i.getItem("picreel_tracker__page_views")?1:parseInt(i.getItem("picreel_tracker__page_views"))+1;i.removeItem("picreel_tracker__page_views"),i.setItem("picreel_tracker__page_views",e,1/0,"/"),null===i.getItem("picreel_tracker__first_visit")&&i.setItem("picreel_tracker__first_visit",new Date,1/0,"/")},setIsMobile:function(e,t,r,o){i.setItem("picreel__is_mobile_"+e,t,r||1/0,o||"/")},getIsMobile:function(e){i.getItem("picreel__is_mobile_"+e)},popup:{isViewed:function(e){return i.getItem("__viewed")||i.getItem("picreel_popup__viewed")==e},setViewed:function(e){i.setItem("picreel_popup__viewed",e,t,c.utils.getLocationPath())},isPassed:function(e){return null!==i.getItem("__invisible")?i.getItem("__invisible"):i.getItem("picreel_popup__passed")==e},setPassed:function(e,t,r){i.setItem("picreel_popup__passed",e,t||1/0,r||"")},getViewedCookie:function(){var e=i.getItem("picreel_popup__viewed");return e||""},getPassedCookie:function(){var e=i.getItem("picreel_popup__passed");return null!==e?e:""},setTemplatePassed:function(e,t){var r=c.utils.getDomainFromUrl(location.host);i.setItem("picreel_popup__template_passed_"+e,e,t||1/0,"/","."+r)},isTemplatePassed:function(e){return null!==i.getItem("picreel_popup__template_passed_"+e)},getPassedTemplates:p,setRBSettingsToCookie:function(e){JSON.stringify(e),i.setItem("picreel_reminderbar",JSON.stringify(e),1/0,"/")},getRBSettingsFromCookie:function(){var e=i.getItem("picreel_reminderbar");return JSON.parse(e)},connectPopupTemplateIdRB:function(e,t,r){i.setItem("picreel_reminderbar__popup_id",e,t||1/0,r||"/")},getConnectedPopupTemplateIdRB:function(){var e=i.getItem("picreel_reminderbar__popup_id");return null!==e?e:""},setReminderbarTypeToShow:function(e,t,r){i.setItem("picreel_reminderbar__show_type_"+picreel.tracker.popup.getReminderbarId(),e,t||1/0,r||"/")},getReminderbarTypeToShow:function(e){var t=i.getItem("picreel_reminderbar__show_type_"+e);return null!==t?t:""},setReminderbarPassed:function(e,t,r){i.setItem("picreel_reminderbar__passed_"+e,e,t||1/0,r||"/")},setReminderbarId:function(e,t,r){i.setItem("picreel_reminderbar__id",e,t||1/0,r||"/")},getReminderbarId:function(){var e=i.getItem("picreel_reminderbar__id");return null!==e?e:""},setReminderbarShowPopup:function(e,t,r,o){i.setItem("picreel_reminderbar__show_popup_"+e,t,r||1/0,o||"/")},getReminderbarShowPopup:function(e){var t=i.getItem("picreel_reminderbar__show_popup_"+e);return null!==t?t:""},setReminderbarIsTrigger:function(e,t,r,o){i.setItem("picreel_reminderbar__is_trigger_"+e,t,r||1/0,o||"/")},getReminderbarIsTrigger:function(e){var t=i.getItem("picreel_reminderbar__is_trigger_"+e);return null!==t?t:""},setOnlyReminderbarTrigger:function(e,t){i.setItem("picreel_reminderbar__trigger_popup_"+e,"1",t||1/0,"/")},isOnlyReminderbarTrigger:function(e){return null!==i.getItem("picreel_reminderbar__trigger_popup_"+e)},isReminderbarPassed:function(e){return null!==i.getItem("picreel_reminderbar__passed_"+e)},isReminderbarSetted:function(){return null!==i.getItem("picreel_reminderbar")},clearReminderbarCookies:function(e){i.removeItem("picreel_reminderbar__passed_"+e),i.removeItem("picreel_reminderbar__show_type_"+e),i.removeItem("picreel_reminderbar__id"),i.removeItem("picreel_reminderbar__popup_id"),i.removeItem("picreel_reminderbar")}},poll:{isViewed:function(e){return i.getItem("picreel_poll__viewed")==e},setViewed:function(e){i.setItem("picreel_poll__viewed",e,t)},isPassed:function(e){return i.getItem("picreel_poll__passed")==e},setPassed:function(e){i.setItem("picreel_poll__passed",e,1/0),i.setItem("picreel_poll__template_passed"+e,e,1/0),i.setItem("picreel_poll__"+e+"_pass_date",new Date,1/0)},setLastPassedQuestion:function(e,t){i.setItem("picreel_poll__last_passed_question",e,1/0),t&&i.setItem("picreel_poll__last_passed_goTo",t,1/0)},getLastPassed:function(){var e=i.getItem("picreel_poll__last_passed_question"),t=i.getItem("picreel_poll__last_passed_goTo");return{questionId:null!==e&&e,goTo:null!==t&&t}},getViewedCookie:function(){var e=i.getItem("picreel_poll__viewed");return e||""},getPassedCookie:function(){var e=i.getItem("picreel_poll__passed");return e||""},clearPollCookies:function(e){i.removeItem("picreel_poll__last_passed_goTo"),i.removeItem("picreel_poll__last_passed_question"),i.removeItem("picreel_poll__"+e+"_pass_date"),i.removeItem("picreel_poll__viewed"),i.removeItem("picreel_poll__passed"),i.removeItem("picreel_poll__template_passed"+e)}},nanobar:{isViewed:function(e){return i.getItem("__viewed")||i.getItem("picreel_nanobar__viewed")==e},setViewed:function(e){i.setItem("picreel_nanobar__viewed",e,t,c.utils.getLocationPath())},isPassed:function(e){return null!==i.getItem("__invisible")?i.getItem("__invisible"):i.getItem("picreel_nanobar__passed")==e},setPassed:function(e,t,r){i.setItem("picreel_nanobar__passed",e,t||1/0,r||"")},getViewedCookie:function(){var e=i.getItem("picreel_nanobar__viewed");return e||""},getPassedCookie:function(){var e=i.getItem("picreel_nanobar__passed");return null!==e?e:""},setTemplatePassed:function(e,t){var r=c.utils.getDomainFromUrl(location.host);i.setItem("picreel_nanobar__template_passed_"+e,e,t||1/0,"/","."+r)},isTemplatePassed:function(e){return null!==i.getItem("picreel_nanobar__template_passed_"+e)},getPassedTemplates:function(){var e,t=[],r=document.cookie.match(new RegExp("picreel_nanobar__template_passed_\\d+[^;]*","ig"));for(r&&r.length&&(e=r.length);e--;)r&&void 0!==r[e]&&t.push(r[e].split("=")[1]);return t.length?t.join(","):""}}}}()}(window),function(b){"use strict";var h=b.picreel=b.picreel||{};h.PollQuestion=function(e,i,o,r,t,a,n,s,p){var l,c,u,d=b.picreel.jQuery||jQuery,m=(h.config.isDebug(),this);function g(e){e?(d(".b-picreel-poll-wrapper").css("overflow-y","hidden"),d(".picreel-poll-body").css("top","50%"),d(".picreel-poll-body").css("-webkit-transform","translateY(-50%)"),d(".picreel-poll-body").css("-moz-transform","translateY(-50%)"),d(".picreel-poll-body").css("-ms-transform","translateY(-50%)"),d(".picreel-poll-body").css("-o-transform","translateY(-50%)"),d(".picreel-poll-body").css("transform","translateY(-50%)")):(d(".b-picreel-poll-wrapper").css("overflow-y","scroll"),d(".picreel-poll-body").css("top","0"),d(".picreel-poll-body").css("-webkit-transform","translateY(0)"),d(".picreel-poll-body").css("-moz-transform","translateY(0)"),d(".picreel-poll-body").css("-ms-transform","translateY(0)"),d(".picreel-poll-body").css("-o-transform","translateY(0)"),d(".picreel-poll-body").css("transform","translateY(0)"))}function f(){var e='<div class="picreel-poll-question">'+m.text+"</div>";return e}this.parentPoll=n,this.id=e.id,this.text=e.text,this.type=e.type,this.inputType=e.inputType,this.randomize=e.randomize,this.goTo=e.goTo,this.isRequired=e.isRequired,this.answers=e.answers,this.answer={},this.button=e.button,this.html=e.html,this.label=e.label,this.description=e.description,this.isAnswered=!1,this.collectData=function(){var o,e,t,i;function a(e,t){var r=e.find(".picreel-poll-answer-comment").find("input, textarea").val();r&&(t.comment=r)}switch(this.answer.data={},m.type){case"text":t=m.$el.find(".picreel-poll-answer-input").val();var r=m.$el.find(".picreel-poll-answer-input").attr("name");m.answer.data[r]=t;break;case"textarea":t=m.$el.find(".picreel-poll-answer-textarea").val(),m.answer.data={text:t};break;case"radio":o=m.$el.find(".picreel-poll-answer-selected"),i=parseInt(o.attr("data-answer-index")),isNaN(i)?m.answer.data=null:(m.answer={goTo:m.answers[i].goTo,data:{answerId:this.answers[i].answerId}},a(o,m.answer.data));break;case"checkbox":e=m.$el.find(".picreel-poll-answer-selected"),m.answer.data={},m.answer.data.answers=[],e.each(function(e,t){var r={};o=d(t),i=parseInt(o.attr("data-answer-index")),isNaN(i)?m.answer.data={answers:[]}:(r.answerId=m.answers[i].answerId,a(o,r),m.answer.data.answers.push(r))});break;case"score":t=m.$el.find(".picreel-poll-answer-selected").attr("data-answer-index"),m.answer={text:t}}},this.validateQuestion=function(){var e=!0;if(m.isRequired){var t="This step is required";switch(m.type){case"text":switch(m.inputType){case"text":e=""!==m.$el.find(".picreel-poll-answer-input").val();break;case"email":t="Please enter valid email address",e=picreel.utils.isEmail(m.$el.find(".picreel-poll-answer-input").val());break;case"tel":t="Please enter valid phone number",e=picreel.utils.isPhone(m.$el.find(".picreel-poll-answer-input").val())}break;case"textarea":e=""!==m.$el.find(".picreel-poll-answer-textarea").val();break;case"radio":case"checkbox":t="Please select at least one answer",e=!!m.$el.find(".picreel-poll-answer-selected").length}e||alert(t)}else e=!0;return e},this.doAnswer=function(){if(!0===r)return!1;if(m.validateQuestion()){if(!0===a&&!o){var e={campaign_id:m.parentPoll,template_id:null};d.ajax({url:h.config.getUrls().main+"api/action",type:"post",dataType:"jsonp",crossDomain:!0,jsonp:!1,data:e}),h.tracker.poll.setPassed(m.parentPoll)}var t;m.isAnswered=!0,m.collectData(),t=m.answer.goTo?m.answer.goTo:m.goTo?m.goTo:void 0,"end"!==m.type&&h.tracker.poll.setLastPassedQuestion(m.id,t),m.sendAnswerData(),m.$el.trigger("picreel-poll-answer")}},this.sendAnswerData=function(){var e,t=h.config.getUrls();m.answer.data.screenId=m.id,m.answer.data.surveyId=m.parentPoll,m.answer.data.requestUrl=p,e=JSON.stringify(m.answer.data),h.utils.sendDataWithScript(e,t.sendAnswer)},this.generateButton=function(){var e,t="";return m.button&&("end"!==m.type?t="<div ":(e=m.button.openInNewTab?' target="_blank" ':"",t+='<a href="'+m.button.redirectUrl+'"'+e),t+='class="picreel-poll-button"style="background-color: '+i.colors.buttons.bg+";color:"+i.colors.buttons.text+';">',t+=m.button.text,"end"!==m.type?t+="</div>":t+="</a>"),t},l="",l+=(u="",m.description?u="before"==m.description.position?'<div class="picreel-poll-question-wrapper"><div class="picreel-poll-question-description picreel-poll-question-description-before"><p style="color: '+i.colors.wrapper.descColor+';">'+m.description.text+'</p></div><hr class="picreel-poll-separator picreel-poll-description-separator" style="color: '+i.colors.wrapper.separatorTop+"; border-top-color: "+i.colors.wrapper.separatorTop+";border-bottom-color: "+i.colors.wrapper.separatorBot+';"/>'+f():'<div class="picreel-poll-question-wrapper">'+f()+'<div class="picreel-poll-question-description picreel-poll-question-description-after"><p style="color: '+i.colors.wrapper.descColor+';">'+m.description.text+"</p></div>":"end"!==m.type&&(u='<div class="picreel-poll-question-wrapper">'+f()),u),l+=function(){var e="",t=0;switch(!m.randomize||"radio"!==m.type&&"checkbox"!==m.type||function(){for(var e,t,r=m.answers,o=r.length;o;e=Math.floor(Math.random()*o),t=r[--o],r[o]=r[e],r[e]=t);}(),m.type){case"text":e+='<div class="picreel-poll-answers picreel-poll-answers-text">',"text"===m.inputType&&(e+='<input maxlength="100" name="text" class="picreel-poll-answer-text-input picreel-poll-answer-input picreel-poll-answer" type="text" value="">'),"email"===m.inputType&&(e+='<input maxlength="100" name="email" placeholder="Enter email" class="picreel-poll-answer-text-input picreel-poll-answer-input picreel-poll-answer" type="email" value="">'),"tel"===m.inputType&&(e+='<input maxlength="13" name="phone" placeholder="Enter phone" class="picreel-poll-answer-text-input picreel-poll-answer-input picreel-poll-answer" type="tel" value="">'),e+="</div>";break;case"textarea":e+='<div class="picreel-poll-answers picreel-poll-answers-text"><textarea maxlength="300" class="picreel-poll-answer-text-input picreel-poll-answer-textarea picreel-poll-answer" type="text" value=""></textarea></div>';break;case"score":for(e+='<div class="picreel-poll-answers picreel-poll-answers-score"><div class="picrell-poll-answers-score-list">';t<10;t++)e+='<div style="background-color: '+i.colors.answers.bg+"; color: "+i.colors.answers.text+'" data-answer-index="'+t+'" class="picreel-poll-answer-score picreel-poll-answer">'+t+"</div>";e+='<div class="picreel-poll-clear"></div></div><div class="picreel-poll-answers-score-label"><div class="picreel-poll-answers-score-label-left">'+m.label.left+'</div><div class="picreel-poll-answers-score-label-right">'+m.label.right+"</div></div></div>";break;case"radio":case"checkbox":var r="radio"===m.type?"picreel-poll-answer-control-dot":"",o="radio"===m.type?"picreel-poll-answers-radio-dot":"";if(e+='<div class="picreel-poll-answers picreel-poll-answers-radio '+o+'"><div class="picrell-poll-answers-list">',void 0!==m.answers)for(;t<m.answers.length;t++)e+='<div data-answer-index="'+t+'" class="picreel-poll-answer" style="background-color: '+i.colors.answers.bg+"; color: "+i.colors.answers.text+'"><div class="picreel-poll-answer-control-wrapper '+r+'">'+("popup"===s||"fullscreen"===s?"radio"===m.type?'<svg  class="picreel-poll-answer-control" version="1.1" baseProfile="full" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events" height="30px" width="30px"><circle stroke="'+i.colors.answers.control+'" fill="none" r="12" cx="15" cy="15" stroke-width="5"></circle><circle cx="15" cy="15" r="5" stroke="black" stroke-width="0" fill="'+i.colors.answers.control+'" class="picreel-poll-answer-control-radio-dot"></svg>':'<svg class="picreel-poll-answer-control" x="0px" y="0px" width="25px" height="25px" viewBox="0 0 72 72" style="enable-background:new 0 0 72 72;" xml:space="preserve"><path style="fill-rule:evenodd;clip-rule:evenodd;fill:'+i.colors.answers.control+';opacity:1;" d="M0,0v72h72V0H0z M57.6,57.6H14.4V14.4H57.6V57.6z"/><g class="picreel-poll-answer-control-radio-dot"><polygon style="fill:none;" points="68.903,26.24 52.959,10.297 27.36,35.896 16.16,24.696 3.097,37.761 29.921,64.583 33.12,61.384 33.44,61.704  "/><polygon style="fill-rule:evenodd;clip-rule:evenodd;fill:none;" points="68.903,26.24 52.959,10.297 27.36,35.896 16.16,24.696 3.097,37.761 29.921,64.583 33.12,61.384 33.44,61.704"/><polygon style="fill-rule:evenodd;clip-rule:evenodd;fill:'+i.colors.answers.control+';" points="63.144,26.24 52.959,16.057 30.239,38.776 19.04,27.576 8.856,37.761 29.921,58.823 30.24,58.504 30.559,58.823"/></g>':'<svg class="picreel-poll-answer-control" width="11.778" height="8.778" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><g id="svg_1"><path id="svg_2" d="m11.339,0.439c0.585,0.586 0.585,1.536 0,2.121l-5.778,5.779c-0.586,0.586 -1.536,0.586 -2.121,0c-0.586,-0.586 -0.586,-1.536 0,-2.121l5.778,-5.778c0.585,-0.586 1.535,-0.586 2.121,-0.001z" fill="#ffffff" clip-rule="evenodd" fill-rule="evenodd"></path><path id="svg_3" d="m0.439,3.439c-0.585,0.586 -0.585,1.536 0,2.121l2.778,2.778c0.586,0.586 1.536,0.586 2.122,0c0.585,-0.586 0.585,-1.536 0,-2.121l-2.778,-2.778c-0.586,-0.585 -1.536,-0.585 -2.122,0z" fill="#ffffff" clip-rule="evenodd" fill-rule="evenodd"></path></g></svg>')+'</div><div class="picreel-poll-answer-text picreel-poll-answer-radio-text">'+m.answers[t].text+"</div>",m.answers[t].comment&&("small"===m.answers[t].comment?e+='<div class="picreel-poll-answer-comment"><input type="text"class="picreel-poll-answer-comment-input"/></div>':"large"===m.answers[t].comment&&(e+='<div class="picreel-poll-answer-comment"><textarea class="picreel-poll-answer-comment-textarea"></textarea></div>')),e+="</div>";e+="</div></div></div>";break;case"end":e='<div class="picreel-poll-answers picreel-poll-answers-end"><div class="picreel-poll-answer-end-mark-wrapper"><svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="-10 -10 148 148" class="picreel-poll-answer-end-mark"><path style="stroke: '+i.colors.checkmark.border+"; fill: "+i.colors.checkmark.bg+';" class="picreel-poll-answer-end-mark-circle" d="m 128,64 a 64,64 0 1 1 -128,0 64,64 0 1 1 128,0 z"></path><path class="picreel-poll-answer-end-mark-sign" d="m 25.6,67.3 21.9,21.8 c 3.5,3.5 10.4,3.6 14, 0.1 L 104.9,47.3 92.8,34.2 54.4,71.4 38.3,55.2 z"></path></svg></div><div class="picreel-poll-question picreel-poll-question-end">'+m.html+"</div></div>"}return e}(),m.el=l,m.$el=d(l),c=m.$el.find(".picreel-poll-answer"),"checkbox"!==m.type&&"score"!==m.type||m.$el.find(".picreel-poll-answer").on({mouseover:function(){d(this).css("backgroundColor",i.colors.answers.hover)},mouseout:function(){d(this).css("backgroundColor",i.colors.answers.bg)}}),"radio"===m.type&&m.$el.find(".picreel-poll-answer").on({mouseover:function(){d(this).css("backgroundColor",i.colors.answers.hover)},mouseout:function(){d(this).hasClass("picreel-poll-answer-selected")||d(this).css("backgroundColor",i.colors.answers.bg)},click:function(){m.$el.find(".picreel-poll-answer").css("backgroundColor",i.colors.answers.bg),d(this).css("backgroundColor",i.colors.answers.hover)}}),"radio"===m.type&&c.on({click:function(e){var t=d(e.target);if(!t.hasClass("picreel-poll-answer-comment-input")&&!t.hasClass("picreel-poll-answer-comment-textarea")){d(this).addClass("picreel-poll-answer-selected").siblings().removeClass("picreel-poll-answer-selected");var r=768<d(b).width()&&d(".picreel-poll-body").height()<=500?435:d(".picreel-poll-body").height();d(b).height()-65-35<r?(d(".b-picreel-poll-wrapper").css("height",d(b).height()-35+"px"),g(0)):(d(".b-picreel-poll-wrapper").css("height",r+65+"px"),g(1)),!0===o&&"undefined"!=typeof PCD&&PCD.postMessage({message:"pr:resize_frame"},b.location.protocol+"//"+b.location.hostname+"/user/intro/campaigns"),m.button||m.doAnswer()}}}),"text"!==m.type&&"textarea"!==m.type||c.on({keydown:function(e){d(this).val().length,13===e.keyCode&&m.doAnswer()}}),"checkbox"===m.type&&c.on({click:function(e){var t=d(e.target);if(!t.hasClass("picreel-poll-answer-comment-input")&&!t.hasClass("picreel-poll-answer-comment-textarea")){d(this).toggleClass("picreel-poll-answer-selected");var r=768<d(b).width()&&d(".picreel-poll-body").height()<=500?435:d(".picreel-poll-body").height();d(b).height()-65-35<r?(d(".b-picreel-poll-wrapper").css("height",d(b).height()-35+"px"),g(0)):(d(".b-picreel-poll-wrapper").css("height",r+65+"px"),g(1)),!0===o&&"undefined"!=typeof PCD&&PCD.postMessage({message:"pr:resize_frame"},b.location.protocol+"//"+b.location.hostname+"/user/intro/campaigns"),m.button||m.doAnswer()}}}),"score"===m.type&&c.on({click:function(){d(this).addClass("picreel-poll-answer-selected"),m.doAnswer()},mouseover:function(){d(this).css("backgroundColor",i.colors.answers.npsHover)},mouseout:function(){d(this).css("backgroundColor",i.colors.answers.bg)}})}}(window),function(_){"use strict";var x,T=_.picreel=_.picreel||{};T.Poll=function(){T.config.isDebug();var a,r,o={},i=[],n=T.config.getUrls(),s={inserted:!1,currentQuestion:null};function t(e){if(x=_.picreel.jQuery||jQuery,r=T.tracker.getUserData(),!0===(a=e).isPreviewMode&&k(a.pollId),!T.tracker.poll.isPassed(a.pollId)){s.shown="opened"===a.showOptions.showState,"string"==typeof a.showOptions.animation&&""!==a.showOptions.animation&&"none"!==a.showOptions.animation&&T.utils.loadStyles(T.config.getUrls().s3+"css/popup-animation.min.css");var t="popup"===a.showOptions.position||"fullscreen"===a.showOptions.position?n.styles.surveyPopup:n.styles.survey;T.utils.loadStyles(t,function(){if(function(){var e;for(var t=0;t<a.questions.length;t++)e=new T.PollQuestion(a.questions[t],a.styling,a.isPreviewMode,a.isOneQuestion,a.noResizeSurvey,0==t,a.pollId,a.showOptions.position,r.sourceUrl),i.push(e)}(),function(){var e='<div class="b-picreel-poll-wrapper picreel-poll-wrapper-'+a.showOptions.showState+" picreel-poll-wrapper-theme-"+a.showOptions.theme+" picreel-poll-wrapper-position-"+a.showOptions.position+("none"!==a.showOptions.animation?" picreel-animated picreel-animation-"+a.showOptions.animation:"")+'" style="background-color: '+("popup"===a.showOptions.position?a.styling.colors.wrapper.bg+";":"transparent;")+" color:"+a.styling.colors.wrapper.text+';">'+function(){var e="";"popup"===a.showOptions.position||"fullscreen"===a.showOptions.position?e+='<div class="picreel-poll-close-wrapper" style="background-color: '+a.styling.colors.buttons.closeBgColor+';"><svg class="picreel-poll-close-opened" version="1.1" baseProfile="full" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events" height="13px" width="13px"><path fill="rgb( 255, 255, 255 )" d="M8.28600000000006,6.5 C8.28600000000006,6.5 11.604,9.823 11.604,9.823 C12.115,10.335 12.126,11.153 11.6310000000001,11.65 C11.135,12.147 10.3199999999999,12.135 9.80999999999995,11.623 C9.80999999999995,11.623 6.49000000000001,8.299 6.49000000000001,8.299 C6.49000000000001,8.299 3.17000000000007,11.623 3.17000000000007,11.623 C2.66000000000008,12.135 1.84500000000003,12.147 1.34899999999993,11.65 C0.85300000000007,11.153 0.86500000000001,10.335 1.375,9.823 C1.375,9.823 4.69399999999996,6.5 4.69399999999996,6.5 C4.69399999999996,6.5 1.375,3.176 1.375,3.176 C0.86500000000001,2.665 0.85300000000007,1.847 1.34899999999993,1.35 C1.84500000000003,0.853 2.66000000000008,0.865 3.17000000000007,1.376 C3.17000000000007,1.376 6.49000000000001,4.701 6.49000000000001,4.701 C6.49000000000001,4.701 9.80999999999995,1.376 9.80999999999995,1.376 C10.3199999999999,0.865 11.135,0.853 11.6310000000001,1.35 C12.126,1.847 12.115,2.665 11.604,3.176 C11.604,3.176 8.28600000000006,6.5 8.28600000000006,6.5 Z "/></svg></div>':e+='<div class="picreel-poll-close-wrapper" style="background-color: '+a.styling.colors.wrapper.bg+';"><svg class="picreel-poll-close-opened" width="16.778" height="9.778" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><g id="svg_1"><path id="svg_2" d="m16.339,0.439c0.585,0.586 0.585,1.536 0,2.121l-6.778,6.779c-0.586,0.586 -1.536,0.586 -2.121,0c-0.586,-0.586 -0.586,-1.536 0,-2.121l6.778,-6.778c0.585,-0.586 1.535,-0.586 2.121,-0.001z" fill="#363636" clip-rule="evenodd" fill-rule="evenodd"></path><path id="svg_3" d="m0.439,0.439c-0.586,0.586 -0.586,1.536 0,2.121l6.778,6.778c0.586,0.586 1.536,0.586 2.122,0s0.586,-1.536 0,-2.121l-6.778,-6.778c-0.586,-0.585 -1.536,-0.585 -2.122,0z" fill="#363636" clip-rule="evenodd" fill-rule="evenodd"></path></g></svg><svg class="picreel-poll-close-closed" width="16.778" height="9.778" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><g id="svg_1"><path id="svg_2" d="m0.439,9.339c-0.586,-0.586 -0.586,-1.536 0,-2.121l6.778,-6.778c0.586,-0.586 1.536,-0.586 2.121,0c0.586,0.586 0.586,1.536 0,2.121l-6.777,6.778c-0.586,0.586 -1.536,0.586 -2.122,0z" fill="#363636" clip-rule="evenodd" fill-rule="evenodd"/><path id="svg_3" d="m16.339,9.339c0.586,-0.586 0.586,-1.536 0,-2.121l-6.778,-6.779c-0.586,-0.586 -1.536,-0.586 -2.122,0s-0.586,1.536 0,2.121l6.778,6.778c0.586,0.587 1.536,0.587 2.122,0.001z" fill="#363636" clip-rule="evenodd" fill-rule="evenodd"/></g></svg></div>';return e}()+'<div class="picreel-poll-body"><div class="picreel-poll-questions-animation-wrapper"></div><div class="picreel-poll-button-wrapper"></div>';"popup"!==a.showOptions.position&&"fullscreen"!==a.showOptions.position&&(e+='<div class="picreel-poll-footer">',a.styling.showCopywrite&&(e+=f()),e+='<div class="picreel-poll-clear"></div></div>');if(e+="</div></div>",o.el=x(e),o.questionsWrapper=o.el.find(".picreel-poll-questions-animation-wrapper"),o.buttonWrapper=o.el.find(".picreel-poll-button-wrapper"),"popup"===a.showOptions.position||"fullscreen"===a.showOptions.position){if("popup"===a.showOptions.position&&o.el.css({width:a.styling.width,height:a.styling.height}),o.el.wrap('<div class="picreel-poll-popup-outer-wrapper"/>'),o.el=o.el.parent(),o.resizeWrapper=o.el,"fullscreen"===a.showOptions.position&&(o.el.css({width:"80%",height:"auto"}),o.el.wrap('<div class="picreel-poll-fullscreen-outer-wrapper" style="background-color: '+a.styling.colors.wrapper.bg+';" />'),o.el=o.el.parent(),o.el.find(".picreel-poll-close-wrapper").appendTo(o.el)),"popup"===a.showOptions.position||"fullscreen"===a.showOptions.position){var t='<div class="picreel-poll-footer">';a.styling.showCopywrite&&(t+=f()),t+='<div class="picreel-poll-clear"></div></div>',o.el.append(t)}o.backdrop=x('<div class="picreel-poll-backdrop"/>')}}(),m(!0))if(function(){if(o.el.find(".picreel-poll-close-wrapper").on("click",function(){!1===a.isOneQuestion&&w()}),o.el.on("picreel-poll-answer",function(e){"end"===s.currentQuestion.type?!1===a.isOneQuestion&&g():!1===a.isOneQuestion&&v()}),o.el.on({mouseover:function(){x(this).css("backgroundColor",a.styling.colors.buttons.hover)},mouseout:function(){x(this).css("backgroundColor",a.styling.colors.buttons.bg)},click:function(e){!1===a.isOneQuestion?s.currentQuestion.doAnswer():e.preventDefault()}},".picreel-poll-button"),"fullscreen"===a.showOptions.position||"popup"===a.showOptions.position)a.styling.width,x(_)}(),"object"==typeof a.showOptions.showType)for(var e=0;e<a.showOptions.showType.length;e++)a.showOptions.showValue=a.showOptions.showType[e].showValue,p(a.showOptions.showType[e].showType);else"string"==typeof a.showOptions.showType&&p()})}}function p(e){if(!(a.showOptions.viewsToShow&&!isNaN(parseInt(a.showOptions.viewsToShow))&&T.tracker.getPageView()<parseInt(a.showOptions.viewsToShow)))switch(e||a.showOptions.showType){case"instant":c();break;case"scroll":var t=x(_),r=isNaN(parseInt(a.showOptions.showValue))?50:parseInt(a.showOptions.showValue),o=null;x(_).on("scroll.picreel-poll-scroll",function(){o&&clearTimeout(o),o=setTimeout(function(){T.utils.getScrollPercentage()>r&&(c(),t.off("scroll.picreel-poll-scroll"))},200)});break;case"leave":case"exit":var i=a.showOptions.timeToWait?a.showOptions.timeToWait:0;setTimeout(function(){x(document).on("mouseout.picreel-poll-leave",function(e){var t,r=(e=e||_.event).relatedTarget||e.toElement;t=!e.target||"SELECT"!=e.target.tagName.toUpperCase(),(!r||"HTML"==r.nodeName)&&e.clientY<=20&&t&&(!1===s.inserted&&c(),x(document).off("mouseout.picreel-poll-leave"))})},1e3*+i);break;case"timed":setTimeout(function(){!1===s.inserted&&c()},1e3*a.showOptions.showValue);break;case"both":p("exit"),p("timed")}}function l(e){e?(x(".b-picreel-poll-wrapper").css("overflow-y","hidden"),x(".picreel-poll-body").css("top","50%"),x(".picreel-poll-body").css("-webkit-transform","translateY(-50%)"),x(".picreel-poll-body").css("-moz-transform","translateY(-50%)"),x(".picreel-poll-body").css("-ms-transform","translateY(-50%)"),x(".picreel-poll-body").css("-o-transform","translateY(-50%)"),x(".picreel-poll-body").css("transform","translateY(-50%)")):(x(".b-picreel-poll-wrapper").css("overflow-y","scroll"),x(".picreel-poll-body").css("top","0"),x(".picreel-poll-body").css("-webkit-transform","translateY(0)"),x(".picreel-poll-body").css("-moz-transform","translateY(0)"),x(".picreel-poll-body").css("-ms-transform","translateY(0)"),x(".picreel-poll-body").css("-o-transform","translateY(0)"),x(".picreel-poll-body").css("transform","translateY(0)"))}function c(){T.tracker.poll.setViewed(a.pollId),x("body").append(o.el).append(o.backdrop),s.inserted=!0,a.isOneQuestion||a.noResizeSurvey?a.noResizeSurvey&&setTimeout(function(){var e=parseInt(x(".b-picreel-poll-wrapper").css("padding-top"))+parseInt(x(".b-picreel-poll-wrapper").css("padding-bottom")),t=x(".picreel-poll-body").height()<=500?500-e:x(".picreel-poll-body").height();x(".b-picreel-poll-wrapper").css("height",t+e+"px"),l(1)},50):setTimeout(function(){var e=parseInt(x(".b-picreel-poll-wrapper").css("padding-top"))+parseInt(x(".b-picreel-poll-wrapper").css("padding-bottom")),t=768<x(_).width()&&x(".picreel-poll-body").height()<=500?500-e:x(".picreel-poll-body").height();x(_).height()-e-35<t?(x(".b-picreel-poll-wrapper").css("height",x(_).height()-35+"px"),l(0)):(x(".b-picreel-poll-wrapper").css("height",t+e+"px"),l(1))},50),!0===a.isPreviewMode&&"undefined"!=typeof PCD&&PCD.postMessage({message:"pr:resize_frame"},_.location.protocol+"//"+_.location.hostname+"/user/intro/campaigns"),!1===a.isPreviewMode&&e(),T.tracker.setVisited()}var e=function(){u(d(n.dataUrl,r))},u=function(e){var t;(t=document.createElement("iframe")).style.display="none",t.style.width="0px",t.style.height="0px",t.src=e,document.body.appendChild(t)},d=function(e,t){for(var r in t)t[r]=encodeURIComponent(t[r]);return e+="?user_data%5BsourceUrl%5D="+t.sourceUrl+"&user_data%5BsourceHost%5D="+t.sourceHost+"&user_data%5BcookieEnabled%5D="+t.cookieEnabled+"&user_data%5BdoNotTrack%5D="+t.doNotTrack+"&user_data%5Blanguage%5D="+t.language+"&user_data%5BuserAgent%5D="+t.userAgent+"&user_data%5BscreenWight%5D="+t.screenWidth+"&user_data%5BscreenHeight%5D="+t.screenHeight+"&user_data%5BtemplateId%5D="+t.passedTemplates+"&user_data%5BcampaignId%5D="+a.pollId+"&user_data%5Breferrer%5D="+t.referrer+"&user_data%5BcurrentTemplate%5D="+t.currentTemplate+"&user_data%5Bret%5D="+t.isReturning};function m(e){var t,r;if(a.isPreviewMode&&e)t=i[0];else if((r=T.tracker.poll.getLastPassed()).goTo)t=function(e){for(var t=null,r=0;r<i.length;r++)if(i[r].id==e){t=i[r];break}return t}(r.goTo);else{if(r.questionId)return y(),!1;t=i[0]}if(!t)return b(),!1;if(!a.isPreviewMode&&e&&"end"===t.type)return b(),!1;if(s.previousQuestion=s.currentQuestion,"end"===(s.currentQuestion=t).type&&T.tracker.poll.setPassed(a.pollId),a.animation&&"none"!==a.animation&&!e)switch(a.animation){case"slideLeft":case"slideRight":o.questionsWrapper.append(t.$el).stop(!0,!0).animate({left:"slideLeft"===a.animation?-1*t.$el.outerWidth():t.$el.outerWidth()},700,function(){x(this).css("left",0),s.previousQuestion.$el.detach()});break;case"fade":o.questionsWrapper.append(t.$el).stop(!0,!0).css("height",t.$el.height()-1),s.previousQuestion.$el.detach(),t.$el.css("display","none").appendTo(o.questionsWrapper).fadeIn(500,function(){o.questionsWrapper.css("height","auto")})}else e?o.questionsWrapper.empty():s.previousQuestion.$el.detach(),o.questionsWrapper.append(t.$el);return o.buttonWrapper.html(s.currentQuestion.generateButton()),e||a.isOneQuestion||a.noResizeSurvey?a.noResizeSurvey&&setTimeout(function(){var e=parseInt(x(".b-picreel-poll-wrapper").css("padding-top"))+parseInt(x(".b-picreel-poll-wrapper").css("padding-bottom")),t=x(".picreel-poll-body").height()<=500?500-e:x(".picreel-poll-body").height();x(".b-picreel-poll-wrapper").css("height",t+e+"px"),!0===a.isPreviewMode&&"undefined"!=typeof PCD&&PCD.postMessage({message:"pr:resize_frame"},_.location.protocol+"//"+_.location.hostname+"/user/intro/campaigns")},50):setTimeout(function(){var e=parseInt(x(".b-picreel-poll-wrapper").css("padding-top"))+parseInt(x(".b-picreel-poll-wrapper").css("padding-bottom")),t=768<x(_).width()&&x(".picreel-poll-body").height()<=500?500-e:x(".picreel-poll-body").height();x(_).width()<768&&x(_).height()-e-35<t?(x(".b-picreel-poll-wrapper").css("height",x(_).height()-35+"px"),l(0)):(x(".b-picreel-poll-wrapper").css("height",t+e+"px"),l(1)),!0===a.isPreviewMode&&"undefined"!=typeof PCD&&PCD.postMessage({message:"pr:resize_frame"},_.location.protocol+"//"+_.location.hostname+"/user/intro/campaigns")},50),!0}function g(){T.tracker.poll.setPassed(a.pollId),!0===a.isPreviewMode&&(k(a.pollId),"undefined"!=typeof PCD&&PCD.postMessage({message:"pr:remove_frame"},_.location.protocol+"//"+_.location.hostname+"/user/intro/campaigns")),b()}function f(){if("popup"===a.showOptions.position||"fullscreen"===a.showOptions.position)var e='<div class="picreel-poll-copywrite"'+(a.showOptions.hideCopywrite?'style="display:none;"':"")+'><a class="picreel-poll-copywrite-link" href="http://www.picreel.com/?utm_source='+r.sourceHost+'&utm_medium=survey&utm_campaign=copyright" '+("fullscreen"===a.showOptions.position?'style="color:'+a.styling.colors.wrapper.text+';"':"")+">Powered by <span>Picreel</span>"+("fullscreen"===a.showOptions.position?unescape("%u2122"):"")+"</a></div>";else e='<div class="picreel-poll-copywrite"><a class="picreel-poll-copywrite-link" href="http://www.picreel.com/?utm_source='+r.sourceHost+'&utm_medium=survey&utm_campaign=copyright">Not using <span>Picreel</span> yet?</a></div>';return e}function b(){s.inserted&&o.el.remove(),a=r=void 0,o={},i=[],s={},x(_).off("resize.picreel-poll")}function h(){s.shown=!0,o.el.addClass("picreel-poll-wrapper-opened").removeClass("picreel-poll-wrapper-closed")}function y(){s.shown=!1,o.el.removeClass("picreel-poll-wrapper-opened").addClass("picreel-poll-wrapper-closed"),"popup"!==a.showOptions.position&&"fullscreen"!==a.showOptions.position||(o.backdrop.hide(),g())}function w(){s.shown?y():h()}function v(){m()}function k(e){T.tracker.poll.clearPollCookies(e)}return{reInit:function(e){b(),t(e)},isShown:function(){return s.shown},open:h,close:y,toggle:w,destroy:b,nextQuestion:v,init:t}}()}(window),function(s){"use strict";var p,l=s.picreel=s.picreel||{};l.Tab=function(){var r,o,i,a=l.config.getUrls();function e(){return void 0!==r&&"undefined"!==r.style&&"0"!=r.style&&"none"!==r.style&&void 0!==i}function n(){1==e()&&"block"==i.css("display")&&i.hide()}return{init:function(e){p=s.picreel.jQuery||s.jQuery,e&&(r=e),"none"!=r.style&&(t=r.position.split(","),o='<div id="picreel-tab-container" class="picreel-tab-container picreel-'+r.style+" picreel-"+t[0]+" picreel-"+t[1]+'" '+("bar"==r.style?'style="background-color:'+r.bgColor+'";':"")+'><div class="picreel-tab picreel-image-'+r.image_size+'" style="color:'+r.textColor+";"+("corner"==r.style?"background:linear-gradient("+{bottom:"-45deg",top:"135deg"}[t[0]]+", rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0) 50%, "+r.bgColor+" 50%, "+r.bgColor+" 100%);":"")+("image"==r.style&&""!=r.image_url?"background-image:url("+r.image_url+");":"")+'">',"corner"==r.style?o+='<div class="picreel-tab-text">'+r.text+'</div><div class="picreel-caret" style="border-'+t[0]+"-color:"+r.textColor+'"></div>':"image"==r.style?o+='<div class="picreel-image-text-container"><div class="picreel-image-text-wrapper"><span class="picreel-image-text">'+r.text+"</span></div></div>":"bar"==r.style&&(o+='<div class="picreel-tab-text">'+r.text+"</div>"),o+="</div>","bar"==r.style&&(o+='<div class="picreel-close-x">&times;</div>'),o+="</div>",i=p(o),p(document).on("click","#picreel-tab-container",function(e){e.preventDefault(),n(),picreel.Popup.render.showPopup(!0)}),p(document).on("click","#picreel-tab-container .picreel-close-x",function(e){e.preventDefault(),e.stopPropagation(),n(),picreel.Popup.render.hidePopup()}),i.hide().prependTo("body"),l.utils.loadStyles(a.styles.tab,function(){i.show()}));var t},hide:n,show:function(){1==e()&&"none"==i.css("display")&&i.show()},destroy:function(){void 0!==i&&i.remove()}}}()}(window),function(I){"use strict";var S=I.picreel=I.picreel||{};S.Popup=function(){S.config.isDebug();var i=!1,l=0,a=!1,c=!0,u=!1,d=!1,n=5,s=0,p=0,m="";I.location.origin||(I.location.origin=I.location.protocol+"//"+I.location.hostname+(I.location.port?":"+I.location.port:""));var g,f,b=86400,h={iframe:null,closeFrame:document.createElement("a"),backdrop:document.createElement("div"),poweredLink:document.createElement("p"),poweredLinkSpan:document.createElement("span"),poweredLinkA:document.createElement("a"),subscribePopup:document.createElement("div"),closeSubscribePopup:document.createElement("a")},e=S.config.getUrls();function y(e){var o=0,t=e||f.showType;m+=t+" ";var r=f.timeToWait?f.timeToWait:0;switch(t){case"exit":setTimeout(function(){picreel.utils.addEvent(I,"mouseout",a)},1e3*+r);break;case"timed":setTimeout(function(){w.showPopup(!1)},1e3*+f.showValue);break;case"scroll":case"scrollup":setTimeout(function(){picreel.utils.addEvent(I,"scroll",i)},1e3*+r);break;case"both":setTimeout(function(){y("exit"),y("timed")},1e3*+r)}function i(e){var t=I.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop||0;if(!(Math.abs(s-t)<=n)){p=s<t?1:-1,s=t;var r=f.showValue||0==+f.showValue?+f.showValue:height/2-winH/2;o&&clearTimeout(o),o=setTimeout(function(){(0<=m.indexOf("scroll ")&&1==p&&S.utils.getScrollPercentage()>r||0<=m.indexOf("scrollup ")&&-1==p&&S.utils.getScrollPercentage()<r)&&(S.utils.removeEvent(I,"scroll",i),w.showPopup(!1))},200)}}function a(e){var t=e.toElement||e.relatedTarget;null===t&&e.clientY<20&&"none"==h.iframe.style.display&&(S.utils.removeEvent(I,"mouseout",a),w.showPopup(!1))}}var w={centerPopupFrame:function(){var e=document.documentElement.scrollTop||document.body.scrollTop,t=document.documentElement.clientHeight;e+t<S.utils.documentHeight()&&(1==f.isFullScreen?h.iframe.style.top=e+"px":(h.iframe.style.top=e+t/2-h.iframe.offsetHeight/2+"px",h.poweredLinkSpan.style.top=e+t/2+h.iframe.offsetHeight/2+8+"px"),h.closeFrame.style.top=e+t/2-h.iframe.offsetHeight/2-12+"px",h.closeFrame.style.marginLeft=h.iframe.offsetWidth/2-13+"px")},styleIframe:function(){h.iframe.className="frame-container picreel-element",h.iframe.frameBorder="0",h.iframe.style.position="fixed",h.iframe.style.left="50%",h.iframe.style.top="50%",h.iframe.style.marginLeft="-400px",h.iframe.style.marginTop="-250px",h.iframe.style.zIndex=2147483641,h.iframe.style.display="none",h.iframe.style.width="800px",h.iframe.style.height="500px",1==f.isMobile&&1!=d&&(h.iframe.style.position="absolute",h.iframe.style.marginTop="auto")},appendBackdrop:function(){if(h.backdrop.id="backdrop-container",h.backdrop.className="frame-container picreel-element",h.backdrop.style.display="none",h.backdrop.style.position="fixed",h.backdrop.style.backgroundColor="rgba(0,0,0,0.9)",h.backdrop.style.bottom="0",h.backdrop.style.left="0",h.backdrop.style.right="0",h.backdrop.style.top="0",h.backdrop.style.zIndex=2147483640,(h.backdrop.style.opacity=1)==f.isMobile&&1!=d){h.backdrop.style.position="absolute",h.backdrop.style.width="100%";var e=S.utils.documentHeight();h.backdrop.style.height=e+"px"}document.body.appendChild(h.backdrop)},appendCloseFrame:function(){h.closeFrame.id="close-frame",h.closeFrame.className="frame-container picreel-element",h.closeFrame.style.position="fixed",h.closeFrame.style.left="50%",h.closeFrame.style.top="50%",h.closeFrame.style.marginLeft="387px",h.closeFrame.style.marginTop="-260px",h.closeFrame.style.display="none",h.closeFrame.style.width="24px",h.closeFrame.style.height="24px",h.closeFrame.style.zIndex=2147483642,h.closeFrame.style.color="#000",h.closeFrame.style.textDecoration="none",h.closeFrame.style.cursor="pointer",h.closeFrame.style.opacity="1",h.closeFrame.style.background='url("'+e.s3+'img/close.png") no-repeat scroll 0% 0% transparent',1==f.isMobile&&1!=d&&(h.closeFrame.style.position="absolute",h.closeFrame.style.marginTop="0"),h.closeFrame.onclick=function(){w.hidePopup(),picreel.Tab.show(),picreel.tracker.popup.getConnectedPopupTemplateIdRB()==g.currentTemplate&&(picreel.tracker.popup.setReminderbarTypeToShow(1),picreel.tracker.popup.setReminderbarShowPopup(g.currentTemplate,1));var e=picreel.tracker.popup.getReminderbarId();(!picreel.tracker.popup.isReminderbarPassed(e)&&picreel.tracker.popup.isTemplatePassed(picreel.tracker.popup.getConnectedPopupTemplateIdRB())||"true"==picreel.tracker.popup.getReminderbarIsTrigger(g.currentTemplate))&&S.gate.runReminderbar(f.isMobile)},document.body.appendChild(h.closeFrame)},appendPoweredLink:function(){h.poweredLink.id="picreel-powered-container",h.poweredLink.className="picreel-element",h.poweredLink.style.display="none",h.poweredLinkSpan.id="picreel-powered-link",h.poweredLinkSpan.className="picreel-element",h.poweredLinkSpan.style.zIndex=2147483647,h.poweredLinkSpan.style.position="fixed",h.poweredLinkSpan.style.left="20px",h.poweredLinkSpan.style.bottom="20px",h.poweredLinkSpan.style.color="#fff",h.poweredLinkSpan.style.textDecoration="none",h.poweredLinkSpan.style.fontFamily='"Segoe UI","Open Sans","Helvetica Neue",Helvetica, Arial',h.poweredLinkSpan.style.fontSize="15px",h.poweredLinkSpan.style.left="50%",h.poweredLinkSpan.style.top="50%",h.poweredLinkSpan.style.bottom="auto",h.poweredLinkSpan.style.marginTop="266px",h.poweredLinkSpan.style.width="800px",h.poweredLinkSpan.style.textAlign="left",h.poweredLinkSpan.style.marginLeft="-400px",h.poweredLinkSpan.style.fontWeight="400",h.poweredLinkSpan.style.color="rgb(200, 200, 200)",h.poweredLinkSpan.style.fontSize="12px",h.poweredLinkSpan.style.textTransform="none",h.poweredLinkA.style.textAlign="left",h.poweredLinkA.style.fontWeight="400",h.poweredLinkA.style.color="rgb(200, 200, 200)",h.poweredLinkA.style.fontSize="12px",h.poweredLinkA.style.textTransform="none",(0<=g.sourceHost.indexOf("countryoutfitter.life")||0<=g.sourceHost.indexOf("countryoutfitter.com"))&&(h.poweredLinkSpan.style.color="rgb(80, 80, 80)",h.poweredLinkA.style.color="rgb(80, 80, 80)"),(0<=g.sourceHost.indexOf("3dcart.com")||0<=g.sourceHost.indexOf("guidetoiceland.is"))&&(h.poweredLinkSpan.style.color="rgb(225, 225, 225)",h.poweredLinkA.style.color="rgb(225, 225, 225)"),(0<=g.sourceHost.indexOf("onagofly.com")||0<=g.sourceHost.indexOf("cashola.com")||0<=g.sourceHost.indexOf("postcron.com"))&&(h.poweredLinkSpan.style.color="rgb(240, 240, 240)",h.poweredLinkA.style.color="rgb(240, 240, 240)"),h.poweredLinkA.href="http://www.picreel.com/?utm_source="+g.sourceHost+"&utm_medium=popup&utm_campaign=copyright",h.poweredLinkA.target="_blank",S.utils.setText(h.poweredLinkA,"Picreel"),h.poweredLinkA.style.padding="5px 1px 5px 5px",h.poweredLinkA.style.textDecoration="underline",S.utils.setText(h.poweredLinkSpan,"Powered by"),h.poweredLinkSpan.appendChild(h.poweredLinkA),h.poweredLink.appendChild(h.poweredLinkSpan),-1==g.sourceHost.indexOf("roveconcepts.com")&&document.body.appendChild(h.poweredLink)},appendSubscribePopup:function(){h.subscribePopup.id="subscribe-popup",h.subscribePopup.className="picreel-element",h.subscribePopup.style.position="fixed",h.subscribePopup.style.width="98%",h.subscribePopup.style.height="50px",h.subscribePopup.style.marginLeft="0",h.subscribePopup.style.left="0",h.subscribePopup.style.top="40%",h.subscribePopup.style.zIndex=2147483641,h.subscribePopup.style.display="none",S.utils.setText(h.subscribePopup,"Thank you for subscribing"),h.subscribePopup.style.align="center",h.subscribePopup.style.fontSize="36px",h.subscribePopup.style.lineHeight="36px",h.subscribePopup.style.fontWeight="bold",h.subscribePopup.style.color="#fff",h.subscribePopup.style.textAlign="center",h.subscribePopup.style.textTransform="none",document.body.appendChild(h.subscribePopup)},appendCloseSubscribePopup:function(){h.closeSubscribePopup.id="close-subscribe-popup",h.closeSubscribePopup.className="picreel-element",h.closeSubscribePopup.style.position="fixed",h.closeSubscribePopup.style.width="30px",h.closeSubscribePopup.style.height="30px",h.closeSubscribePopup.style.marginLeft="0",h.closeSubscribePopup.style.right="3%",h.closeSubscribePopup.style.top="26%",h.closeSubscribePopup.style.bottom="auto",h.closeSubscribePopup.style.zIndex=2147483642,h.closeSubscribePopup.style.display="none",h.closeSubscribePopup.style.lineHeight="30px",h.closeSubscribePopup.style.color="transparent",h.closeSubscribePopup.style.textDecoration="none",h.closeSubscribePopup.style.cursor="pointer",h.closeSubscribePopup.style.opacity="0.8",h.closeSubscribePopup.style.background='url("https://system.picreel.com/img/theme_images/9b8a3cc8450b8cb1f0ac930e4f0889bb373b9f25.png") no-repeat scroll 0% 0% transparent',document.body.appendChild(h.closeSubscribePopup),h.closeSubscribePopup.onclick=function(){w.hideSubscribePopup()}},hidePoweredFrame:function(){a=!0,h.poweredLink.style.display="none"},hideSubscribePopup:function(){h.closeSubscribePopup.style.display="none",h.subscribePopup.style.display="none",h.backdrop.style.display="none",h.poweredLink.style.display="none"},hideCloseFrame:function(){i=!0,h.closeFrame.style.display="none"},showSubscribePopup:function(e){""!=e?(S.utils.setText(h.subscribePopup,e),w.hidePopup(),h.subscribePopup.style.display="block",h.backdrop.style.display="block",u&&(h.closeSubscribePopup.style.display="block"),h.poweredLink.style.display=a?"none":"block",l?setTimeout(w.hideSubscribePopup,l):setTimeout(w.hideSubscribePopup,2e3)):w.hidePopup()},showPopup:function(e){if(!c){if(!0===e||!S.tracker.popup.isPassed(g.currentTemplate)&&!S.tracker.popup.isTemplatePassed(g.currentTemplate)){S.tracker.popup.setViewed(g.currentTemplate),h.iframe.style.display="block",i||(h.closeFrame.style.display="block"),h.backdrop.style.display="block",a||1==d||(h.poweredLink.style.display="block"),k(),picreel.Tab.hide(),v(),_("getCookieNames"),_("screen_size",'{"height":"'+I.outerHeight+'","width":"'+I.outerWidth+'"}');var t={};if(null!==document.getElementById("picreellistname")&&(t.picreellistname=document.getElementById("picreellistname").value),null!==document.getElementById("picreeltracking")&&(t.picreeltracking=document.getElementById("picreeltracking").value),0<document.getElementsByClassName("picreel-popup-data").length)for(var r=document.getElementsByClassName("picreel-popup-data"),o=0;o<r.length;o++)void 0!==r[o].value&&""!==r[o].id&&void 0!==r[o].value&&(t[r[o].id]=r[o].value);t&&_("picreel_track_data",t)}1==f.isMobile&&1!=d&&(1!=f.isFullScreen&&(h.poweredLinkSpan.style.position="absolute",h.poweredLinkSpan.style.marginTop="auto"),I.onscroll=w.centerPopupFrame,I.onresize=w.centerPopupFrame,w.centerPopupFrame())}},addHiddingPopupCookies:function(){var e=S.utils.getLocationPath();S.tracker.popup.setPassed(g.currentTemplate,b,e),S.tracker.popup.setTemplatePassed(g.currentTemplate,b),g.passedTemplates?g.passedTemplates+=","+g.currentTemplate:g.passedTemplates=g.currentTemplate},hidePopup:function(){var e=picreel.tracker.popup.getReminderbarId();e&&!picreel.tracker.popup.isReminderbarPassed(e)&&"false"!=picreel.tracker.popup.getReminderbarIsTrigger(g.currentTemplate)||(S.utils.cookies.removeItem("picreel_reminderbar__trigger_popup_"+g.currentTemplate),S.utils.cookies.removeItem("picreel_reminderbar__is_trigger_"+g.currentTemplate),S.utils.cookies.removeItem("picreel_reminderbar__show_popup_"+g.currentTemplate),w.addHiddingPopupCookies()),h.iframe.style.display="none",h.closeFrame.style.display="none",h.backdrop.style.display="none",h.poweredLink.style.display="none"}},v=function(){t(r(e.dataUrl,g))};var t=function(e){var t;(t=document.createElement("iframe")).style.display="none",t.style.width="0px",t.style.height="0px",t.src=e,document.body.appendChild(t)},r=function(e,t){for(var r in t)t[r]=encodeURIComponent(t[r]);return e+="?user_data%5BsourceUrl%5D="+t.sourceUrl+"&user_data%5BsourceHost%5D="+t.sourceHost+"&user_data%5BcookieEnabled%5D="+t.cookieEnabled+"&user_data%5BdoNotTrack%5D="+t.doNotTrack+"&user_data%5Blanguage%5D="+t.language+"&user_data%5BuserAgent%5D="+t.userAgent+"&user_data%5BscreenWight%5D="+t.screenWidth+"&user_data%5BscreenHeight%5D="+t.screenHeight+"&user_data%5BtemplateId%5D="+t.passedTemplates+"&user_data%5BcampaignId%5D="+t.campaignId+"&user_data%5Breferrer%5D="+t.referrer+"&user_data%5BcurrentTemplate%5D="+t.currentTemplate+"&user_data%5Bret%5D="+t.isReturning},k=function(){document.getElementById("picreel-frame").contentWindow.postMessage("showPopup","*")},_=function(e,t){document.getElementById("picreel-frame").contentWindow.postMessage({message:e,params:t},"*")},x=function(e){var t;if(document.createEvent?(t=document.createEvent("HTMLEvents")).initEvent(e,!0,!0):(t=document.createEventObject()).eventType=e,t.eventName=e,document.createEvent)document.dispatchEvent(t);else try{document.fireEvent("on"+e,t)}catch(e){}},T=function(e){var t,r;try{t=e.params.match(/width["']?:["']?(\d+)/)[1],r=e.params.match(/height["']?:["']?(\d+)/)[1]}catch(e){r=t="auto"}h.iframe.style.width=t+"px",h.iframe.style.height=r+"px",h.iframe.style.marginLeft="-"+t/2+"px",h.closeFrame.style.marginLeft=t/2-13+"px",1!=f.isMobile&&(h.iframe.style.marginTop="-"+r/2+"px",h.closeFrame.style.marginTop="-"+(r/2+10)+"px"),h.poweredLinkSpan.style.marginTop=+r/2+8+"px",h.poweredLinkSpan.style.marginLeft="-"+ +t/2+"px",h.poweredLinkSpan.style.width=t+"px"};function P(){try{document.getElementById("picreel-frame").contentWindow.postMessage({message:"popupInitialized"},"*"),"undefined"!=typeof PCD&&PCD.receiveMessage(function(e){var t=picreel.tracker.popup.getReminderbarId();if(void 0!==e.message)switch(e.message){case"close_popup":void 0!==e.params&&"do-action"==e.params&&x("picreel_do_action"),picreel.Tab.show(),picreel.tracker.popup.getConnectedPopupTemplateIdRB()==g.currentTemplate&&(picreel.tracker.popup.setReminderbarTypeToShow(1),picreel.tracker.popup.setReminderbarShowPopup(g.currentTemplate,1),S.tracker.popup.setOnlyReminderbarTrigger(g.currentTemplate,b)),w.hidePopup(),(!picreel.tracker.popup.isReminderbarPassed(t)&&picreel.tracker.popup.isTemplatePassed(picreel.tracker.popup.getConnectedPopupTemplateIdRB())||"true"==picreel.tracker.popup.getReminderbarIsTrigger(g.currentTemplate))&&S.gate.runReminderbar(f.isMobile),x("picreelClosePopup");break;case"close_popup_no_cookie":h.iframe.style.display="none",h.closeFrame.style.display="none",h.backdrop.style.display="none",h.poweredLink.style.display="none",picreel.Tab.show();break;case"hide_close_frame":w.hideCloseFrame();break;case"hide_powered_link":w.hidePoweredFrame();break;case"current_campaign":g.campaignId=e.params;break;case"current_template":g.currentTemplate=e.params,c=!1,S.tracker.popup.isTemplatePassed(g.currentTemplate)&&w.hidePopup();break;case"close_after_submit":picreel.Tab.destroy(),picreel.tracker.popup.getConnectedPopupTemplateIdRB()!=g.currentTemplate||picreel.tracker.popup.isReminderbarPassed(t)||(picreel.tracker.popup.setReminderbarShowPopup(g.currentTemplate,0),picreel.tracker.popup.setReminderbarTypeToShow(0),picreel.tracker.popup.setReminderbarIsTrigger(g.currentTemplate,!1)),w.showSubscribePopup(e.params),(!picreel.tracker.popup.isReminderbarPassed(t)&&picreel.tracker.popup.isTemplatePassed(picreel.tracker.popup.getConnectedPopupTemplateIdRB())||"false"==picreel.tracker.popup.getReminderbarIsTrigger(g.currentTemplate))&&S.gate.runReminderbar(f.isMobile),x("picreelSubmitPopup");break;case"copy_to_clipboard":S.utils.setText(h.subscribePopup,"Coupon copied to your clipboard"),h.subscribePopup.style.width="600px",h.subscribePopup.style.marginLeft="-250px",w.showSubscribePopup();break;case"redirect":picreel.tracker.popup.getConnectedPopupTemplateIdRB()!=g.currentTemplate||picreel.tracker.popup.isReminderbarPassed(t)||(picreel.tracker.popup.setReminderbarShowPopup(g.currentTemplate,0),picreel.tracker.popup.setReminderbarTypeToShow(0),picreel.tracker.popup.setReminderbarIsTrigger(g.currentTemplate,!1)),picreel.Tab.destroy(),w.hidePopup(),(!picreel.tracker.popup.isReminderbarPassed(t)&&picreel.tracker.popup.isTemplatePassed(picreel.tracker.popup.getConnectedPopupTemplateIdRB())||"false"==picreel.tracker.popup.getReminderbarIsTrigger(g.currentTemplate))&&S.gate.runReminderbar(f.isMobile),x("picreelRedirectPopup"),/^(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])?$/gi.test(e.params)&&(location.href=e.params);break;case"only_redirect":x("picreelRedirectPopup"),/^(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])?$/gi.test(e.params)&&(location.href=e.params);break;case"show_popup":w.showPopup(!1);break;case"set_expire_time":b=parseInt(e.params);break;case"cookie_after_submit":picreel.tracker.popup.getConnectedPopupTemplateIdRB()==g.currentTemplate&&(picreel.tracker.popup.setReminderbarTypeToShow(0),picreel.tracker.popup.setReminderbarShowPopup(g.currentTemplate,0),picreel.utils.cookies.removeItem("picreel_reminderbar__is_trigger_"+g.currentTemplate),picreel.utils.cookies.removeItem("picreel_reminderbar__trigger_popup_"+g.currentTemplate)),picreel.Tab.destroy(),x("picreelSubmitPopup");break;case"cookieNames":for(var r=e.params.split(","),i={},o=0;o<r.length;o++)"breadcrumbs"==r[o]?i[r[o]]=document.location.href:i[r[o]]=picreel.utils.cookies.getItem(r[o]);i&&_("cookieValues",i);break;case"popupTimeout":l=parseInt(e.params);break;case"wrap_background":h.backdrop.style.background=e.params;break;case"wrap_text_color":h.subscribePopup.style.color=e.params;break;case"poweredlink_text_color":h.poweredLinkA.style.color=e.params;break;case"wrap_click_close":h.backdrop.onclick=function(){w.hidePopup()};break;case"popup_size":T(e);break;case"full_width_template":h.iframe.style.left="0",h.iframe.style.top="0",h.iframe.style.marginLeft="0",h.iframe.style.marginTop="0",h.iframe.style.zIndex=2147483641,h.iframe.style.display="none",h.iframe.style.width="100%",h.iframe.style.height="100%",h.poweredLink.style.display="none",h.poweredLinkSpan.style.position="fixed",h.poweredLinkSpan.style.left="20px",h.poweredLinkSpan.style.bottom="20px",h.poweredLinkSpan.style.color="#fff",h.poweredLinkSpan.style.textDecoration="none",h.poweredLinkSpan.style.fontFamily='"Segoe UI","Open Sans","Helvetica Neue",Helvetica, Arial',h.poweredLinkSpan.style.fontSize="15px",h.poweredLinkSpan.style.top="auto",h.poweredLinkSpan.style.marginTop="0",h.poweredLinkSpan.style.width="auto",h.poweredLinkSpan.style.marginLeft="0",h.poweredLinkSpan.style.fontWeight="400",h.poweredLinkA.style.color="#fff",h.poweredLinkA.style.fontSize="15px",h.poweredLinkA.href="http://www.picreel.com/?utm_source="+g.sourceHost+"&utm_medium=popup&utm_campaign=copyright",h.poweredLinkA.target="_blank",S.utils.setText(h.poweredLinkA,"Picreel"),h.poweredLinkA.style.padding="5px 1px 5px 5px",h.poweredLinkA.style.textDecoration="underline",h.poweredLinkSpan.appendChild(h.poweredLinkA),h.poweredLink.appendChild(h.poweredLinkSpan);break;case"do_custom_action":void 0!==e.params&&(I.picreel_email=e.params,x("picreel_do_action"));case"close_message_btn":u=!0;break;case"corner_popup":var a,n,s;try{a=parseInt(e.params.match(/width["']?:["']?(\d+)/)[1]),n=parseInt(e.params.match(/height["']?:["']?(\d+)/)[1]),s=e.params.match(/\[(\w+)\]/)[1]}catch(e){n=a="auto",s="br"}1!=f.isMobile||1==f.isMobile&&1==d?(h.backdrop.style.bottom="auto",h.backdrop.style.right="auto",h.backdrop.style.opacity=0,h.backdrop.style.width="0px",h.backdrop.style.height="0px",h.subscribePopup.style.width="0",h.subscribePopup.style.height="0",h.subscribePopup.style.left="0",h.subscribePopup.style.top="0",h.subscribePopup.style.bottom="auto",h.subscribePopup.style.right="auto",h.subscribePopup.style.opacity=0,h.closeSubscribePopup.style.width="0",h.closeSubscribePopup.style.height="0",h.closeSubscribePopup.style.left="0",h.closeSubscribePopup.style.top="0",h.closeSubscribePopup.style.bottom="auto",h.closeSubscribePopup.style.right="auto",h.closeSubscribePopup.style.opacity=0,h.iframe.style.left="auto",h.iframe.style.top="auto",h.iframe.style.right="auto",h.iframe.style.bottom="auto",h.iframe.style.marginLeft="0",h.iframe.style.marginTop="0",h.closeFrame.style.left="auto",h.closeFrame.style.top="auto",h.closeFrame.style.right="auto",h.closeFrame.style.bottom="auto",h.closeFrame.style.marginLeft="0",h.closeFrame.style.marginTop="0",h.poweredLinkSpan.style.left="auto",h.poweredLinkSpan.style.top="auto",h.poweredLinkSpan.style.right="auto",h.poweredLinkSpan.style.bottom="auto",h.poweredLinkSpan.style.marginLeft="0",h.poweredLinkSpan.style.marginTop="0",h.poweredLinkSpan.style.width="auto",1==d&&(h.iframe.style.position="fixed",h.closeFrame.style.position="fixed"),"br"==s?(h.iframe.style.right="7px",h.iframe.style.bottom="7px",h.poweredLinkSpan.style.right="7px",h.poweredLinkSpan.style.bottom=n+7+"px",h.closeFrame.style.right=a-13+"px",h.closeFrame.style.bottom=n-13+"px"):"bl"==s?(h.iframe.style.left="7px",h.iframe.style.bottom="7px",h.poweredLinkSpan.style.left="7px",h.poweredLinkSpan.style.bottom=n+7+"px",h.closeFrame.style.left=a-13+"px",h.closeFrame.style.bottom=n-13+"px"):"tr"==s?(h.iframe.style.right="7px",h.iframe.style.top="7px",h.poweredLinkSpan.style.right="7px",h.poweredLinkSpan.style.top=n+7+"px",h.closeFrame.style.right=a-13+"px",h.closeFrame.style.top=n-13+"px"):"tl"==s?(h.iframe.style.left="7px",h.iframe.style.top="7px",h.poweredLinkSpan.style.left="7px",h.poweredLinkSpan.style.top=n+7+"px",h.closeFrame.style.left=a-13+"px",h.closeFrame.style.top=n-13+"px"):"cr"==s?(h.iframe.style.right="7px",h.iframe.style.top="50%",h.poweredLinkSpan.style.left="7px",h.poweredLinkSpan.style.top=n+7+"px",h.iframe.style.marginTop="-"+n/2+"px",h.closeFrame.style.marginTop="-"+(n/2+10)+"px",h.closeFrame.style.right=a-10+"px",h.closeFrame.style.top="50%"):"cl"==s?(h.iframe.style.left="7px",h.iframe.style.top="50%",h.poweredLinkSpan.style.left="7px",h.poweredLinkSpan.style.top=n+7+"px",h.iframe.style.marginTop="-"+n/2+"px",h.closeFrame.style.marginTop="-"+(n/2+10)+"px",h.closeFrame.style.left=a-10+"px",h.closeFrame.style.top="50%"):"tc"==s?(h.iframe.style.marginLeft="-"+a/2+"px",h.iframe.style.top="7px",h.iframe.style.left="50%",h.poweredLinkSpan.style.marginLeft="-"+a/2+"px",h.poweredLinkSpan.style.top=n+7+"px",h.poweredLinkSpan.style.left="50%",h.closeFrame.style.marginLeft=a/2-13+"px",h.closeFrame.style.top=n-13+"px",h.closeFrame.style.left="50%"):"bc"==s&&(h.iframe.style.marginLeft="-"+a/2+"px",h.iframe.style.bottom="7px",h.iframe.style.left="50%",h.poweredLinkSpan.style.marginLeft="-"+a/2+"px",h.poweredLinkSpan.style.bottom=n+7+"px",h.poweredLinkSpan.style.left="50%",h.closeFrame.style.marginLeft=a/2-13+"px",h.closeFrame.style.bottom=n-13+"px",h.closeFrame.style.left="50%"),h.iframe.style.width=a+"px",h.iframe.style.height=n+"px"):T(e);break;case"mobile_corner":d=!0;break;case"replace_data":var p=e.params.split(",");i={};p.forEach(function(e,t,r){var o=document.querySelector(e);i[e]=null!==o?o.innerHTML||o.value:""}),_("replaced_data",i)}})}catch(e){}}return{init:function(e,t){if(f=t,g=e.userData,h.iframe=e.iframe,!(f.viewsToShow&&+S.tracker.getPageView()<=+f.viewsToShow)){f.animation=f.animation?f.animation:"",w.styleIframe(),w.appendCloseFrame(),w.appendBackdrop(),w.appendSubscribePopup(),w.appendCloseSubscribePopup(),"string"==typeof f.animation&&""!==f.animation&&"none"!==f.animation&&(S.utils.loadStyles(S.config.getUrls().s3+"css/popup-animation.min.css"),h.iframe.className+=" picreel-animated picreel-animation-"+f.animation),P(),picreel.tracker.popup.getReminderbarId();var r=picreel.tracker.popup.getConnectedPopupTemplateIdRB();if(picreel.tracker.popup.isOnlyReminderbarTrigger(r)||("object"==typeof f.showType?setTimeout(function(){for(var e=0;e<f.showType.length;e++)f.showValue=f.showType[e].showValue,y(f.showType[e].showType)},3e3):f.showType&&setTimeout(function(){y()},3e3)),f.customShowTriggers)for(var o=0;o<f.customShowTriggers.length;o++){var i=document.querySelector(f.customShowTriggers[o].targetElement);null!==i&&picreel.utils.addEvent(i,f.customShowTriggers[o].triggerName,function(e){e.preventDefault(),w.showPopup(!0)})}"0"!=f.tabSettings.style&&"undefined"!==f.tabSettings.style&&"none"!==f.tabSettings.style&&picreel.utils.checkSupport("jquery",function(){picreel.Tab.init(f.tabSettings)})}},listen:P,render:w,setUserData:function(e){g=e},setCurrentTemplateId:function(e){g.currentTemplate=e},sendUserData:v}}()}(window),function(m){"use strict";var g,f=m.picreel=m.picreel||{};f.reminderBar=function(){var a,i,r,t,n=f.config.getUrls();function o(e){g=m.picreel.jQuery||m.jQuery,e&&(a=e);var t=!1;1==a.appearance.isTrigger&&1==picreel.tracker.popup.getReminderbarShowPopup(a.popup_template_id)&&(t=!0),c(t),(r=g(i)).find(".picreel-reminderbar-close-button").on("click",function(e){e.preventDefault(),g(this).addClass("picreel-reminderbar-close-button-hide"),setTimeout(function(){l(!0)},200)}),r.find(".picreel-reminderbar-button:not(#reminderbar-show-popup)").on("click",function(e){var t,r,o={},i=g(".picreel-reminderbar-input");switch(a.type){case"coupon":break;case"email":o.email=i.filter("[type=email]").val();break;case"emailAndName":o.name=i.filter("[type=text]").val(),o.email=i.filter("[type=email]").val()}picreel.utils.isEmail(o.email)?(t=o,(r={}).tech_data=[{name:"base_url",value:"//app.picreel.com/"},{name:"subscribe_url",value:"http://app.picreel.com/api/subscribe"},{name:"action_url",value:"http://app.picreel.com/api/action"},{name:"editable",value:"1"},{name:"campaign_id",value:a.popup_campaign_id},{name:"request_url",value:location.href},{name:"hide_close_link",value:0},{name:"template_id",value:a.popup_template_id},{name:"timer",value:""},{name:"periodicity",value:86400},{name:"hide_powered_link",value:0},{name:"is_reminderbar",value:1}],r.custom_data=t,g.ajax({url:n.main+"api/subscribe_new",type:"post",dataType:"jsonp",crossDomain:!0,jsonp:!1,data:r,complete:function(){}}),"coupon"!==a.type&&e.preventDefault(),setTimeout(function(){l(!0)},200)):i.filter("[type=email]").addClass("picreel-input-error").focus()}),r.find(".picreel-reminderbar-input").on("blur",function(){g(this).removeClass("picreel-input-error")}),g(document).on("click","#reminderbar-show-popup",function(e){e.preventDefault(),picreel.Popup.render.showPopup(!0),setTimeout(function(){l(!1)},200)}),r.hide().prependTo("body"),-1==f.utils.loadStyles(n.styles.reminderBar,function(){s(),a.appearance.autohide&&setTimeout(function(){l(!0)},1e3*parseInt(a.appearance.autohide))})&&s()}function s(){"timed"===a.appearance.showType?setTimeout(function(){p()},1e3*parseInt(a.appearance.showValue)):p()}function p(){r.show(),a.appearance.pushPage&&function(){var e="large"===a.styling.size?60:38;t=parseInt(g("body").css("paddingTop")),(t=isNaN(t)?0:t)&&(e+=t);g("body").animate({paddingTop:e},200)}()}function l(e){if(r.addClass("picreel-reminderbar-closed"),a.appearance.pushPage&&g("body").animate({paddingTop:t},200),1==e){picreel.tracker.popup.setReminderbarPassed(a.id);f.utils.getLocationPath();picreel.Popup.render.addHiddingPopupCookies()}}function c(e){var t,r,o=a.styling.addShadow?"picreel-reminderbar-with-shadow ":"";i='<div class="picreel-reminderbar picreel-reminderbar-position-'+a.appearance.position+" "+o+"picreel-reminderbar-attachment-"+a.appearance.attachment+" picreel-reminderbar-size-"+a.styling.size+'" style="background-color:'+a.styling.bg+"; color: "+a.styling.textColor+"; border-bottom-color: "+a.styling.border+'"><div class="picreel-reminderbar-content-wrapper">'+(1==e?(t='<div class="picreel-reminderbar-content picreel-reminderbar-content-trigger"><div class="picreel-reminderbar-title" style="color:'+a.styling.textColor+';">'+a.data.triggerText+"</div>",t+=(r='<a id="reminderbar-show-popup" class="picreel-reminderbar-button picreel-reminderbar-button-style-button" style="background-color: '+a.styling.coupon.bg+"; color: "+a.styling.coupon.textColor+';" ',r+="#",r+=">"+a.data.buttonTriggerText+"</a>"),t+="</div>"):function(){var e='<div class="picreel-reminderbar-content"><div class="picreel-reminderbar-title" style="color:'+a.styling.textColor+';">'+a.data.text+"</div>";switch(a.type){case"coupon":e+=(t='<div class="picreel-reminderbar-coupon-wrapper" style="background-color: '+a.styling.coupon.bg+';"><span class="picreel-reminderbar-coupon" style="color: '+a.styling.coupon.textColor+";border-color: "+a.styling.coupon.textColor+';" ',t+=">"+a.data.couponText+"</span></div>");break;case"email":e+='<input type="email" class="picreel-reminderbar-input" placeholder="'+a.data.emailFieldPlaceholder+'">',e+=u();break;case"emailAndName":e+='<div class="picreel-reminderbar-inputs-wrapper">',e+='<input type="text" class="picreel-reminderbar-input" placeholder="'+a.data.nameFieldPlaceholder+'">',e+='<input type="email" class="picreel-reminderbar-input" placeholder="'+a.data.emailFieldPlaceholder+'">',e+="</div>",e+=u()}var t;return e+="</div>"}())+"</div>"+function(){var e="";a.appearance.closable&&(e='<div class="picreel-reminderbar-close-button" style="color:'+a.styling.closeColor+'">&times;</div>');return e}()+"</div>"}function u(){var e=a.data.url?'href="'+a.data.url+'"':"",t=a.data.target?'target="'+a.data.target+'"':"",r='<a class="picreel-reminderbar-button picreel-reminderbar-button-style-button" style="background-color: '+a.styling.button.bg+"; color: "+a.styling.button.textColor+';" ';return r+=e+t,r+=">"+a.data.buttonText+"</a>"}function d(){void 0!==r&&r.remove()}return{init:o,reInit:function(e){d(),o(e)},initPreviewRB:function(e){g=m.picreel.jQuery||jQuery,void 0!==r&&d(),e&&(a=e),a.appearance.position="top",a.appearance.attachment="static";var t=!(a.appearance.closable=!0);1==a.appearance.isPreviewTrigger&&(t=!0),c(t),(r=g(i)).hide().prependTo(".preview-container .preview"),g(document).trigger("reminderbar_loaded"),p()}}}()}(window),function(k){"use strict";var _,x=k.picreel=k.picreel||{};x.nanoBar=function(){var s,t,n,r,p=x.config.getUrls(),l=(x.config.isDebug(),5),c=0,u=0,d="",o=3;k.location.origin||(k.location.origin=k.location.protocol+"//"+k.location.hostname+(k.location.port?":"+k.location.port:""));var i,a=86400;function m(e){_=k.picreel.jQuery||k.jQuery,e&&(s=e),(i=x.tracker.getUserData()).currentTemplate=s.id,i.campaignId=s.campaign_id,x.tracker.nanobar.isTemplatePassed(i.currentTemplate)||s.showOptions.viewsToShow&&+x.tracker.getPageView()<=+s.showOptions.viewsToShow||(x.utils.loadStyles(p.styles.nanoBar),y(),(n=_(t)).find(".picreel-nanobar-close-button").on("click",function(e){e.preventDefault(),_(this).addClass("picreel-nanobar-close-button-hide"),setTimeout(function(){h(!0)},200)}),n.find(".picreel-nanobar-button").on("click",function(e){var t,r,o,i,a={},n=_(".picreel-nanobar-input");switch(s.type){case"coupon":case"redirect":break;case"collect":switch(s.data.inputType){case"email":a.email=n.filter("[type=email]").val();break;case"phone":a.phone=n.filter("[type=tel]").val();break;case"emailName":a.name=n.filter("[type=text]").val(),a.email=n.filter("[type=email]").val();break;case"emailName":a.name=n.filter("[type=text]").val(),a.phone=n.filter("[type=tel]").val()}}null==a.email||picreel.utils.isEmail(a.email)?null==a.phone||picreel.utils.isPhone(a.phone)?("redirect"===s.type?(i={campaign_id:s.campaign_id,template_id:s.id},_.ajax({url:p.main+"api/action",type:"post",dataType:"jsonp",crossDomain:!0,jsonp:!1,data:i,complete:function(){"function"==typeof o&&o()}}),"_self"===s.data.redirectTarget&&(e.preventDefault(),location.href=s.data.redirectUrl)):(e.preventDefault(),t=a,(r={}).tech_data=[{name:"campaign_id",value:s.campaign_id},{name:"request_url",value:location.href},{name:"template_id",value:s.id},{name:"is_nanobar",value:1}],r.custom_data=t,_.ajax({url:p.main+"api/subscribe_new",type:"post",dataType:"jsonp",crossDomain:!0,jsonp:!1,data:{tech_data:JSON.stringify(r.tech_data),custom_data:JSON.stringify(r.custom_data)},complete:function(){}})),setTimeout(function(){h(!0)},200)):n.filter("[type=tel]").addClass("picreel-input-error").focus():n.filter("[type=email]").addClass("picreel-input-error").focus()}),n.find(".picreel-nanobar-input").on("blur",function(){_(this).removeClass("picreel-input-error")}),n.hide().prependTo("body"),"object"==typeof s.showOptions.showType?setTimeout(function(){for(var e=0;e<s.showOptions.showType.length;e++)s.showOptions.showValue=s.showOptions.showType[e].showValue,g(s.showOptions.showType[e].showType)},1e3*o):s.showOptions.showType&&setTimeout(function(){g()},1e3*o))}function g(e){var o=0,t=e||s.showOptions.showType;d+=t+" ";var r=s.showOptions.timeToWait?s.showOptions.timeToWait:0;switch(t){case"exit":setTimeout(function(){picreel.utils.addEvent(k,"mouseout",a)},1e3*+r);break;case"timed":setTimeout(function(){f(!1)},1e3*+s.showOptions.showValue);break;case"scroll":case"scrollup":setTimeout(function(){picreel.utils.addEvent(k,"scroll",i)},1e3*+r);break;case"both":setTimeout(function(){g("exit"),g("timed")},1e3*+r)}function i(e){var t=k.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop||0;if(!(Math.abs(c-t)<=l)){u=c<t?1:-1,c=t;var r=s.showOptions.showValue||0==+s.showOptions.showValue?+s.showOptions.showValue:height/2-winH/2;o&&clearTimeout(o),o=setTimeout(function(){(0<=d.indexOf("scroll ")&&1==u&&x.utils.getScrollPercentage()>r||0<=d.indexOf("scrollup ")&&-1==u&&x.utils.getScrollPercentage()<r)&&(x.utils.removeEvent(k,"scroll",i),f(!1))},200)}}function a(e){var t=e.toElement||e.relatedTarget;null===t&&e.clientY<20&&"none"==n.css("display")&&(x.utils.removeEvent(k,"mouseout",a),f(!1))}}function f(e){if("none"!==n.css("display"))return!1;!0===e?(n.show(),s.appearance.pushPage&&b()):x.tracker.nanobar.isPassed(i.currentTemplate)||x.tracker.nanobar.isTemplatePassed(i.currentTemplate)||(x.tracker.nanobar.setViewed(i.currentTemplate),n.show(),s.appearance.pushPage&&b(),x.Popup.setUserData(i),x.Popup.sendUserData())}function b(){var e="large"===s.styling.size?60:38;r=parseInt(_("body").css("paddingTop")),(r=isNaN(r)?0:r)&&(e+=r),_("body").animate({paddingTop:e},200)}function h(e){if(n.addClass("picreel-nanobar-closed"),s.appearance.pushPage&&_("body").animate({paddingTop:r},200),1==e){var t=x.utils.getLocationPath();x.tracker.nanobar.setPassed(i.currentTemplate,a,t),x.tracker.nanobar.setTemplatePassed(i.currentTemplate,a),i.passedTemplates?i.passedTemplates+=","+i.currentTemplate:i.passedTemplates=i.currentTemplate}}function y(){var e=s.styling.addShadow?"picreel-nanobar-with-shadow ":"";t='<div class="picreel-nanobar picreel-nanobar-position-'+s.appearance.position+" "+e+"picreel-nanobar-attachment-"+s.appearance.attachment+" picreel-nanobar-size-"+s.styling.size+'" style="background-color:'+s.styling.bg+"; color: "+s.styling.textColor+"; border-bottom-color: "+s.styling.border+'"><div class="picreel-nanobar-content-wrapper">'+function(){var e='<div class="picreel-nanobar-content"><div class="picreel-nanobar-title" style="color:'+s.styling.textColor+';">'+s.data.text+"</div>";switch(s.type){case"redirect":e+=w();break;case"collect":switch(s.data.inputType){case"email":e+='<input type="email" class="picreel-nanobar-input" placeholder="'+s.data.emailPlaceholder+'">',e+=w();break;case"emailName":e+='<div class="picreel-nanobar-inputs-wrapper">',e+='<input type="text" class="picreel-nanobar-input" placeholder="'+s.data.namePlaceholder+'">',e+='<input type="email" class="picreel-nanobar-input" placeholder="'+s.data.emailPlaceholder+'">',e+="</div>",e+=w();break;case"phone":e+='<div class="picreel-nanobar-inputs-wrapper">',e+='<input type="tel" class="picreel-nanobar-input" placeholder="'+s.data.phonePlaceholder+'">',e+="</div>",e+=w();break;case"phoneName":e+='<div class="picreel-nanobar-inputs-wrapper">',e+='<input type="text" class="picreel-nanobar-input" placeholder="'+s.data.namePlaceholder+'">',e+='<input type="tel" class="picreel-nanobar-input" placeholder="'+s.data.phonePlaceholder+'">',e+="</div>",e+=w()}}return e+="</div>"}()+"</div>"+function(){var e="";s.appearance.closable&&(e='<div class="picreel-nanobar-close-button" style="color:'+s.styling.closeColor+'">&times;</div>');return e}()+"</div>"}function w(){var e=s.data.redirectUrl?' href="'+s.data.redirectUrl+'" ':"",t=' target="'+(s.data.redirectTarget?s.data.redirectTarget:"_blank")+'"',r='<a class="picreel-nanobar-button picreel-nanobar-button-style-button" style="background-color: '+s.styling.button.bg+"; color: "+s.styling.button.textColor+';" ';return"redirect"==s.type&&(r+=e+t),r+=">"+s.data.buttonText+"</a>"}function v(){void 0!==n&&n.remove()}return{init:m,reInit:function(e){v(),m(e)},initPreviewNB:function(e){_=k.picreel.jQuery||jQuery,void 0!==n&&v(),e&&(s=e),s.appearance.position="top",s.appearance.attachment="static",s.appearance.closable=!0,y(),(n=_(t)).hide().prependTo(".preview-container .preview"),_(document).trigger("nanobar_loaded"),f(!0)}}}()}(window),function(l){"use strict";if(l.picreel.gate)return;var c=l.picreel=l.picreel||{};c.gate=function(){if(!picreel.utils.cookies.getItem("picreel_block")){var n=c.tracker.getGetParameters(),e=setInterval(function(){/loaded|complete/.test(document.readyState)&&(picreel.utils.createEvent("picreel_loaded"),n.no_init||t(),clearInterval(e))},10);return{init:t,getTemplate:a,runReminderbar:p}}function s(e){if("hide"===e.cookie_status&&null!==picreel.utils.cookies.getItem(e.cookie_name)){var t=picreel.utils.cookies.getItem(e.cookie_name);if(""==e.cookie_value||"="==e.cookie_compare&&t==e.cookie_value||">"==e.cookie_compare&&t>e.cookie_value||"<"==e.cookie_compare&&t<e.cookie_value||">="==e.cookie_compare&&t>=e.cookie_value||"<="==e.cookie_compare&&t<=e.cookie_value)return!1}if("show"===e.cookie_status){if(null===picreel.utils.cookies.getItem(e.cookie_name))return!1;if(""!=e.cookie_value){t=picreel.utils.cookies.getItem(e.cookie_name);if("="==e.cookie_compare&&t!=e.cookie_value||">"==e.cookie_compare&&t<=e.cookie_value||"<"==e.cookie_compare&&t>=e.cookie_value||">="==e.cookie_compare&&t<e.cookie_value||"<="==e.cookie_compare&&t>e.cookie_value)return!1}}if("hide_like"===e.cookie_status&&null!==picreel.utils.cookies.getCookieByNamePart(e.cookie_name)){t=picreel.utils.cookies.getCookieByNamePart(e.cookie_name);if(""==e.cookie_value||"="==e.cookie_compare&&t==e.cookie_value||">"==e.cookie_compare&&t>e.cookie_value||"<"==e.cookie_compare&&t<e.cookie_value||">="==e.cookie_compare&&t>=e.cookie_value||"<="==e.cookie_compare&&t<=e.cookie_value)return!1}if("show_like"===e.cookie_status){if(null===picreel.utils.cookies.getCookieByNamePart(e.cookie_name))return!1;if(""!=e.cookie_value){t=picreel.utils.cookies.getCookieByNamePart(e.cookie_name);if("="==e.cookie_compare&&t!=e.cookie_value||">"==e.cookie_compare&&t<=e.cookie_value||"<"==e.cookie_compare&&t>=e.cookie_value||">="==e.cookie_compare&&t<e.cookie_value||"<="==e.cookie_compare&&t>e.cookie_value)return!1}}return!0}function t(){var e=picreel.utils.getParameterByName("picreel_block");if(void 0!==e&&0<parseInt(e)&&c.tracker.blockPicreel(e),!picreel.utils.cookies.getItem("picreel_block"))if(c.tracker.addPageView(),-1<location.href.indexOf("for-popup-link.com")){var t=picreel.config.getUrls().s3+"js/picreel.no-iframe-api.min.js",r=document.createElement("script");document.getElementsByTagName("head")[0].appendChild(r),r.onload=function(){},r.async=!1,r.src=t;var o=picreel.config.getUrls().s3+"js/picreel.no-iframe-popup.min.js",i=document.createElement("script");document.getElementsByTagName("head")[0].appendChild(i),i.onload=function(){var i=a(!0);c.CustomPopup.setUserData(i.userData),c.CustomPopup.render.appendPoweredLink(),picreel.utils.jsonp(i.iframe.src+"&custom_template=1","getResponseJSON",function(t){if(!1==!!t.template_passed){if(!1!=!!t.popup){var r=null,e=function(){if(o){clearInterval(r),picreel.utils.createEvent("picreel_popup_loaded"),i.iframe=document.createElement("div"),i.iframe.style.display="none",i.iframe.id="pcrl-frame-body",i.iframe.innerHTML=t.template,document.body.appendChild(i.iframe);var e=document.createElement("script");e.type="text/javascript",e.text=t.template_scripts,document.body.appendChild(e),i.picreel_tech_data=t.picreel_tech_data,i.event_stack=JSON.parse(t.event_stack),c.CustomPopup.init(i,t.popup)}},o=!0;!1!==t.popup.cookie&&(o=s(t.popup.cookie),r=setInterval(function(){o=s(t.popup.cookie),e()},5e3)),e()}}else c.tracker.popup.setTemplatePassed(t.template_passed)})},i.async=!1,i.src=o}else picreel.utils.checkSupport("json",function(){var e,t;e=function(){var n;PCD.receiveMessage(function(e){if("ab_no_template"===e.message&&e.params){var t=JSON.parse(e.params);c.Popup.setCurrentTemplateId(t.a_template_id),c.Popup.render.addHiddingPopupCookies()}if("widgets_data"===e.message&&e.params){var o=JSON.parse(e.params);if(!1!=!!o.template_passed)return void c.tracker.popup.setTemplatePassed(o.template_passed);if(!1!=!!o.popup){var r=null,i=function(){if(a){clearInterval(r);try{n.iframe.contentWindow.postMessage("popupInitialized","*"),picreel.utils.createEvent("picreel_popup_loaded")}catch(e){}c.Popup.init(n,o.popup)}},a=!0;!1!==o.popup.cookie&&(a=s(o.popup.cookie),r=setInterval(function(){a=s(o.popup.cookie),i()},5e3)),i()}!1!=!!o.survey&&picreel.utils.checkSupport("jquery",function(){var e=null,t=function(){r&&(clearInterval(e),c.Poll.init(o.survey))},r=!0;!1!==o.survey.cookie&&(r=s(o.survey.cookie),e=setInterval(function(){r=s(o.survey.cookie),t()},5e3)),t()}),!1!=!!o.nanobar&&picreel.utils.checkSupport("jquery",function(){var e=null,t=function(){r&&(clearInterval(e),c.nanoBar.init(o.nanobar))},r=!0;!1!==o.nanobar.showOptions.cookie&&(r=s(o.nanobar.showOptions.cookie),e=setInterval(function(){r=s(o.nanobar.showOptions.cookie),t()},5e3)),t()}),!1!=!!o.reminderbar&&(picreel.tracker.popup.setReminderbarId(o.reminderbar.id),picreel.tracker.setIsMobile(o.reminderbar.popup_template_id,o.reminderbar.isMobile),picreel.tracker.popup.connectPopupTemplateIdRB(o.reminderbar.popup_template_id),picreel.tracker.popup.setReminderbarIsTrigger(o.reminderbar.popup_template_id,o.reminderbar.appearance.isTrigger),picreel.tracker.popup.setRBSettingsToCookie(o.reminderbar))}}),n=a(),c.Popup.setUserData(n.userData),c.Popup.render.appendPoweredLink();var e=picreel.tracker.popup.getConnectedPopupTemplateIdRB();picreel.tracker.popup.isReminderbarPassed(picreel.tracker.popup.getReminderbarId())||!picreel.tracker.popup.isTemplatePassed(e)&&!picreel.tracker.popup.isOnlyReminderbarTrigger(e)||p(picreel.tracker.setIsMobile(e))},t=c.config.getUrls(),void 0===l.PCD?picreel.utils.loadScript(t.messenger,function(){e&&e()}):e&&e()})}function a(e){var o,i={userData:c.tracker.getUserData(),iframe:document.createElement("iframe")},a=c.config.getUrls();return function(){var e=[];for(var t in o={source_url:i.userData.sourceUrl,source_host:i.userData.sourceHost,templateId:i.userData.passedTemplates,userAgent:i.userData.userAgent,referrer:i.userData.referrer,screenWight:i.userData.screenWidth,screenHeight:i.userData.screenHeight,pv:c.tracker.popup.getViewedCookie(),pp:c.tracker.popup.getPassedCookie(),sv:c.tracker.poll.getViewedCookie(),sp:c.tracker.poll.getPassedCookie(),nv:c.tracker.nanobar.getViewedCookie(),np:c.tracker.nanobar.getPassedTemplates(),ret:i.userData.isReturning?"1":""},n.campaign_id&&(o.campaignId=n.campaign_id),o)e.push(t+"="+encodeURIComponent(o[t]));i.iframe.src=a.sourceUrl+"?"+e.join("&"),picreel.tracker.popup.isReminderbarPassed(picreel.tracker.popup.getReminderbarId())&&(i.iframe.src+="&rp=1",picreel.tracker.popup.clearReminderbarCookies(picreel.tracker.popup.getReminderbarId())),c.tracker.isPicreelBlocked()&&(i.iframe.src+="&picreel_block=1"),c.tracker.isVisitedCookie()||(i.iframe.src+="&visited=1"),i.iframe.src+="&utm_source=Picreel&utm_medium=display&utm_campaign=Picreel";var r=c.tracker.getPrlGetParametersUrl();""!==r?(c.tracker.setPrlGetParametersCookie(r),i.iframe.src+=r):null!==(r=c.tracker.getPrlGetParametersCookie())&&""!==r&&(i.iframe.src+=r),c.tracker.setVisited()}(),e||(i.iframe.className="picreel-element",i.iframe.id="picreel-frame",i.iframe.style.display="none",document.body.appendChild(i.iframe)),i}function p(r){picreel.tracker.popup.isReminderbarSetted()&&picreel.utils.checkSupport("jquery",function(){var e=picreel.tracker.popup.getRBSettingsFromCookie(),t=picreel.tracker.popup.getReminderbarTypeToShow(picreel.tracker.popup.getReminderbarId());(r||1==t&&1==e.appearance.isTrigger||1==t&&"coupon"!=e.type||0==t&&"coupon"==e.type)&&picreel.reminderBar.reInit(e)})}}()}(window);